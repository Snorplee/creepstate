<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Creepstate Investigation - Enhanced Visualizations</title>
    <!-- Version tracking system -->
    <script src="version.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://unpkg.com/@observablehq/plot@0.6"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.157.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/3d-force-graph@1.73.2/dist/3d-force-graph.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/plugin/notes/notes.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gantt-chart-d3@5.1.1/dist/gantt-chart-d3.js"></script>
    <script src="enhanced-network-data.js"></script>
    <script src="enhanced-network-visualization.js"></script>
    <!-- Photo Database and Components -->
    <script src="photo-database.js"></script>
    <script src="photo-components.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.3.1/dist/theme/black.css">
    <style>
        :root {
            --primary-color: #ff6b6b;
            --secondary-color: #4ecdc4;
            --accent-color: #45b7d1;
            --danger-color: #8B0000;
            --putin-color: #800080;
            --future-color: #32CD32;
            --bg-dark: #1a1a1a;
            --text-light: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-dark);
            color: var(--text-light);
            line-height: 1.6;
            margin-top: 80px;
        }

        /* Universal Navigation */
        .universal-nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(26, 26, 26, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 2px solid var(--primary-color);
            z-index: 10000;
            padding: 10px 0;
        }

        .nav-container-universal {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        .nav-brand {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-links {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .nav-link-universal {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .nav-link-universal:hover {
            background: var(--primary-color);
            transform: translateY(-2px);
        }

        .nav-link-universal.active {
            background: var(--secondary-color);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Navigation Bar Styles */
        .nav-bar {
            background: linear-gradient(135deg, #ff6b6b 0%, #4ecdc4 100%);
            padding: 15px 0;
            margin-bottom: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 0 20px;
        }
        
        .nav-link {
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 25px;
            background: rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }
        
        .nav-link:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        
        .nav-link.active {
            background: rgba(255,255,255,0.9);
            color: #333;
        }
        
        .nav-icon {
            font-size: 16px;
        }

        .nav-tabs {
            display: flex;
            background: linear-gradient(135deg, rgba(255,107,107,0.2) 0%, rgba(78,205,196,0.2) 100%);
            border-radius: 10px;
            margin-bottom: 30px;
            overflow-x: auto;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .nav-tab {
            padding: 12px 20px;
            background: none;
            border: none;
            color: #ccc;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            white-space: nowrap;
            border-radius: 8px;
            margin: 5px;
        }

        .nav-tab:hover {
            background: rgba(255,255,255,0.1);
            color: var(--text-light);
            transform: translateY(-2px);
        }

        .nav-tab.active {
            background: var(--primary-color);
            color: var(--text-light);
            box-shadow: 0 4px 15px rgba(255,107,107,0.3);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .visualization-panel {
            background: #2d2d2d;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            position: relative;
            border-bottom: 2px solid #444;
        }

        .panel-title {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .panel-controls {
            display: flex;
            gap: 10px;
        }

        .control-button {
            padding: 8px 16px;
            background: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            background: #357abd;
            transform: translateY(-2px);
        }

        /* Network Visualization Styles */
        .network-container {
            position: relative;
            width: 100%;
            height: 800px;
            border: 2px solid #444;
            border-radius: 10px;
            background: radial-gradient(circle, #1a1a1a 0%, #0a0a0a 100%);
            overflow: hidden;
        }
        
        /* Enhanced Network Tooltip Styles */
        #networkTooltip {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            transition: opacity 0.2s ease;
        }
        
        #networkTooltip .tooltip-photo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #ff6b6b;
            float: left;
            margin-right: 10px;
            margin-bottom: 10px;
        }
        
        #networkTooltip .tooltip-content {
            overflow: hidden;
        }
        
        /* Enhanced Network Node Styles */
        .network-node {
            transition: all 0.3s ease;
        }
        
        .network-node:hover {
            stroke-width: 3px !important;
            filter: brightness(1.2);
        }
        
        .connection-line {
            transition: stroke-opacity 0.3s ease;
        }
        
        /* Hub tier indicators */
        .hub-tier-1 { filter: drop-shadow(0 0 8px #FFD700); }
        .hub-tier-2 { filter: drop-shadow(0 0 6px #4ecdc4); }
        .hub-tier-3 { filter: drop-shadow(0 0 4px #666); }
        
        /* Network Controls */
        .network-controls {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            gap: 8px;
            z-index: 1000;
            flex-wrap: wrap;
        }
        
        .network-control-button {
            background: rgba(255, 107, 107, 0.8);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }
        
        .network-control-button:hover {
            background: rgba(255, 107, 107, 1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
        }
        
        .network-control-button:active {
            transform: translateY(0);
        }
        
        /* Special styling for center node */
        .center-node {
            animation: pulse 3s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { 
                filter: drop-shadow(0 0 15px #8B0000);
            }
            50% { 
                filter: drop-shadow(0 0 25px #8B0000) drop-shadow(0 0 35px #8B0000);
            }
        }
        
        /* Enhanced connection lines */
        .connection-line {
            stroke-linecap: round;
        }
        
        /* Network legend */
        .network-legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 8px;
            font-size: 11px;
            border: 1px solid #444;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }
        
        .legend-circle {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
            border: 1px solid #333;
        }

        .network-svg {
            width: 100%;
            height: 100%;
            cursor: move;
        }

        .network-node {
            cursor: pointer;
            stroke: #fff;
            stroke-width: 2px;
            transition: stroke-width 0.2s ease;
        }

        .network-node:hover {
            stroke-width: 4px;
        }

        .network-node.pinned {
            stroke: #ffff00;
            stroke-width: 6px;
            filter: drop-shadow(0 0 10px #ffff00);
        }

        .network-node.highlighted-node {
            stroke: #ff6b6b;
            stroke-width: 8px;
            filter: drop-shadow(0 0 15px #ff6b6b);
            animation: pulse-highlight 2s ease-in-out;
        }

        @keyframes pulse-highlight {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        /* Distraction Dashboard Styles */
        .distraction-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 20px;
            margin-top: 20px;
        }

        .distraction-alerts {
            grid-column: 1 / -1;
            background: rgba(255,107,107,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--danger-color);
        }

        .distraction-timeline {
            background: rgba(78,205,196,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--secondary-color);
        }

        .pattern-analysis {
            background: rgba(69,183,209,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--accent-color);
        }

        .alert-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--danger-color);
        }

        .alert-timestamp {
            color: var(--secondary-color);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .alert-content {
            font-size: 14px;
            line-height: 1.5;
        }

        .alert-severity {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .alert-severity.high {
            background: var(--danger-color);
            color: white;
        }

        .alert-severity.medium {
            background: #feca57;
            color: black;
        }

        .alert-severity.low {
            background: var(--secondary-color);
            color: white;
        }

        /* Research Dashboard Styles */
        .research-dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 20px;
            margin-top: 20px;
        }

        .research-status {
            grid-column: 1 / -1;
            background: rgba(69,183,209,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--accent-color);
        }

        .research-results {
            background: rgba(78,205,196,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--secondary-color);
        }

        .research-insights {
            background: rgba(255,107,107,0.1);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid var(--primary-color);
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 5px 10px;
            padding: 8px 12px;
            border-radius: 20px;
            background: rgba(255,255,255,0.1);
            font-size: 14px;
        }

        .status-indicator.active {
            background: rgba(50,205,50,0.3);
            border: 1px solid #32CD32;
        }

        .status-indicator.inactive {
            background: rgba(255,0,0,0.3);
            border: 1px solid #ff0000;
        }

        .research-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--secondary-color);
        }

        .research-timestamp {
            color: var(--accent-color);
            font-size: 12px;
            margin-bottom: 5px;
        }

        .research-content {
            font-size: 14px;
            line-height: 1.5;
        }

        .insight-item {
            background: rgba(255,255,255,0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .insight-confidence {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 8px;
            background: var(--primary-color);
            color: white;
        }

        /* Additional animations */
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Responsive grid layouts */
        @media (max-width: 768px) {
            .distraction-dashboard,
            .research-dashboard {
                grid-template-columns: 1fr;
                grid-template-rows: auto;
            }
            
            .distraction-alerts,
            .research-status {
                grid-column: 1;
            }
        }

        .network-link {
            stroke: #999;
            stroke-opacity: 0.6;
            transition: all 0.3s ease;
        }

        .network-link.highlighted {
            stroke: #ff6b6b;
            stroke-width: 3px;
            stroke-opacity: 1;
        }

        .network-label {
            font-size: 12px;
            fill: white;
            text-anchor: middle;
            pointer-events: none;
        }

        /* Person Info Panel */
        .person-info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 350px;
            background: rgba(45, 45, 45, 0.95);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px);
            border: 2px solid var(--primary-color);
            display: none;
            z-index: 1000;
            max-height: 500px;
            overflow-y: auto;
        }

        .person-info-panel.active {
            display: block;
            animation: slideInRight 0.3s ease-out;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .person-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 3px solid var(--primary-color);
            margin: 0 auto 15px;
            display: block;
        }

        .person-avatar.loading {
            background: linear-gradient(45deg, #333, #555);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .person-name {
            font-size: 20px;
            font-weight: bold;
            color: var(--primary-color);
            text-align: center;
            margin-bottom: 10px;
        }

        .person-bio {
            font-size: 14px;
            line-height: 1.6;
            margin-bottom: 15px;
            color: #ccc;
        }

        .person-connections {
            margin-top: 15px;
        }

        .person-connections h4 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 16px;
        }

        .connection-item {
            background: rgba(255,255,255,0.1);
            padding: 8px;
            border-radius: 8px;
            margin-bottom: 8px;
            font-size: 12px;
            border-left: 3px solid var(--accent-color);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .connection-item:hover {
            background: rgba(255,255,255,0.2);
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .person-details {
            margin-top: 15px;
        }

        .person-details h4 {
            color: var(--secondary-color);
            margin-bottom: 10px;
            font-size: 16px;
        }

        .detail-bullet {
            margin-bottom: 8px;
            font-size: 13px;
            line-height: 1.5;
            padding-left: 15px;
            position: relative;
        }

        .detail-bullet:before {
            content: '‚Ä¢';
            color: var(--primary-color);
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .person-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .action-button {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .pin-button {
            background: #ffff00;
            color: #000;
        }

        .pin-button:hover {
            background: #ffdd00;
            transform: translateY(-2px);
        }

        .center-button {
            background: var(--accent-color);
            color: white;
        }

        .center-button:hover {
            background: #357abd;
            transform: translateY(-2px);
        }

        .close-button {
            background: var(--danger-color);
            color: white;
        }

        .close-button:hover {
            background: #a00000;
            transform: translateY(-2px);
        }

        /* Network Controls */
        .network-controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .network-control-button {
            padding: 10px 15px;
            background: rgba(45, 45, 45, 0.9);
            color: white;
            border: 2px solid var(--accent-color);
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
        }

        .network-control-button:hover {
            background: var(--accent-color);
            transform: translateY(-2px);
        }

        /* Gantt Chart Styles */
        .gantt-container {
            width: 100%;
            height: 500px;
            overflow-x: auto;
            border: 2px solid #444;
            border-radius: 10px;
        }

        .gantt-chart {
            min-width: 1200px;
        }

        /* Mind Map Styles */
        .mindmap-container {
            width: 100%;
            height: 800px;
            position: relative;
            border: 2px solid #444;
            border-radius: 10px;
            overflow: auto;
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }

        .mindmap-explanation {
            background: rgba(30, 30, 30, 0.95);
            border: 1px solid #444;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            color: #e0e0e0;
        }

        .mindmap-legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding: 15px;
            background: rgba(40, 40, 40, 0.8);
            border-radius: 8px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 12px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid;
        }

        .mindmap-controls {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .mindmap-node {
            position: absolute;
            padding: 8px 12px;
            border-radius: 20px;
            color: white;
            font-weight: bold;
            font-size: 11px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 100px;
            text-align: center;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.4);
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .mindmap-node.expanded {
            transform: scale(1.2);
            z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.6);
        }

        .mindmap-cluster {
            position: absolute;
            border: 2px dashed rgba(255,255,255,0.2);
            border-radius: 15px;
            background: rgba(255,255,255,0.03);
            pointer-events: none;
        }

        .cluster-label {
            position: absolute;
            top: -15px;
            left: 10px;
            background: rgba(40, 40, 40, 0.9);
            color: #ccc;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: bold;
        }

        .mindmap-node:hover {
            transform: scale(1.15);
            z-index: 100;
            box-shadow: 0 8px 25px rgba(0,0,0,0.6);
            border-color: rgba(255,255,255,0.8);
        }

        .mindmap-node[data-type="politician"] {
            border-color: #FF4500;
        }
        .mindmap-node[data-type="royalty"] {
            border-color: #FFD700;
        }
        .mindmap-node[data-type="celebrity"] {
            border-color: #FF69B4;
        }
        .mindmap-node[data-type="academic"] {
            border-color: #45b7d1;
        }
        .mindmap-node[data-type="business"] {
            border-color: #4ecdc4;
        }
        .mindmap-node[data-type="enabler"] {
            border-color: #8B0000;
        }
        .mindmap-node[data-type="deceased"] {
            border-color: #696969;
            opacity: 0.8;
        }
        .mindmap-node[data-type="victim"] {
            border-color: #32CD32;
        }
        .mindmap-node[data-type="location"] {
            border-color: #B22222;
        }

        .mindmap-connection {
            position: absolute;
            background: #666;
            z-index: 1;
            transition: all 0.3s ease;
        }

        .mindmap-connection.strong {
            background: #ff6b6b;
            height: 3px !important;
        }

        .mindmap-connection.medium {
            background: #feca57;
            height: 2px !important;
        }

        .mindmap-connection.weak {
            background: #666;
            height: 1px !important;
        }

        .mindmap-connection.temporal {
            background: linear-gradient(90deg, #45b7d1, transparent);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }

        .node-info-panel {
            position: absolute;
            background: rgba(20, 20, 20, 0.95);
            border: 1px solid #444;
            border-radius: 8px;
            padding: 15px;
            color: white;
            max-width: 300px;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0,0,0,0.6);
            display: none;
        }

        .node-info-header {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 8px;
            color: #45b7d1;
        }

        .node-info-category {
            font-size: 11px;
            color: #feca57;
            margin-bottom: 5px;
        }

        .node-info-connections {
            font-size: 11px;
            color: #ccc;
            margin-top: 8px;
        }

        .evidence-level {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: bold;
            margin-top: 5px;
        }

        .evidence-confirmed {
            background: #32CD32;
            color: black;
        }

        .evidence-likely {
            background: #feca57;
            color: black;
        }

        .evidence-suspected {
            background: #ff6b6b;
            color: white;
        }

        /* Timeline Slideshow Styles */
        .slideshow-container {
            width: 100%;
            height: 600px;
        }

        .reveal .slides section {
            background: linear-gradient(135deg, #2d2d2d 0%, #1a1a1a 100%);
            border-radius: 15px;
            padding: 20px;
            font-size: 18px !important;
            overflow-y: auto !important;
            max-height: 90vh !important;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        .slide-event-title {
            font-size: 1.8em !important;
            color: var(--primary-color);
            margin-bottom: 10px;
            text-align: center;
        }

        .slide-event-date {
            font-size: 1.1em !important;
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 15px;
        }

        .slide-event-content {
            font-size: 0.9em !important;
            line-height: 1.5;
            text-align: left;
            max-height: 50vh;
            overflow-y: auto;
            padding: 0 10px;
        }

        .slide-event-image {
            max-width: 80%;
            max-height: 200px;
            margin: 10px auto;
            display: block;
            border-radius: 10px;
        }

        .slide-navigation {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .slide-nav-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            margin: 0 5px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
        }

        /* Filter Panel */
        .filter-panel {
            background: #333;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
            color: white;
        }

        .filter-checkbox input {
            transform: scale(1.2);
        }

        /* Legend */
        .legend {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .panel-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
            
            .panel-controls {
                width: 100%;
                justify-content: space-between;
            }
        }
    </style>
</head>
<body>
    <!-- Universal Navigation -->
    <nav class="universal-nav">
        <div class="nav-container-universal">
            <a href="index.html" class="nav-brand">
                üîç Creepstate Investigation
            </a>
            <div class="nav-links">
                <a href="index.html" class="nav-link-universal">Home</a>
                <a href="timeline.html" class="nav-link-universal">Timeline</a>
                <a href="enhanced-visualizations.html" class="nav-link-universal active">Network</a>
                <a href="flight-logs.html" class="nav-link-universal">Flight Logs</a>
                <a href="vertical-timeline.html" class="nav-link-universal">Vertical</a>
                <a href="stats.html" class="nav-link-universal">Statistics</a>
                <a href="name-the-scandal.html" class="nav-link-universal">üèÜ Name It!</a>
            </div>
        </div>
    </nav>
    <div class="container">
        <h1 style="text-align: center; color: var(--primary-color); font-size: 3em; margin-bottom: 30px;">
            üïµÔ∏è Creepstate Investigation Suite
        </h1>
        
        <!-- Navigation Bar -->
        <div class="nav-bar">
            <div class="nav-container">
                <a href="index.html" class="nav-link">
                    <span class="nav-icon">üè†</span>
                    HOME
                </a>
                <a href="index.html" class="nav-link">
                    <span class="nav-icon">üìÖ</span>
                    Interactive Timeline
                </a>
                <a href="enhanced-visualizations.html" class="nav-link active">
                    <span class="nav-icon">üåê</span>
                    Network Visualizations
                </a>
                <a href="flight-logs.html" class="nav-link">
                    <span class="nav-icon">‚úàÔ∏è</span>
                    Flight Logs
                </a>
                <a href="slideshow-timeline.html" class="nav-link">
                    <span class="nav-icon">üé¨</span>
                    Slideshow Presentation
                </a>
                <a href="stats.html" class="nav-link">
                    <span class="nav-icon">üìä</span>
                    Statistics
                </a>
                <a href="names-and-shame.html" class="nav-link">
                    <span class="nav-icon">üë•</span>
                    Associates Directory
                </a>
                <a href="resources.html" class="nav-link">
                    <span class="nav-icon">üÜò</span>
                    Victim Resources
                </a>
            </div>
        </div>
        
        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('network')">üåê Network Map</button>
            <button class="nav-tab" onclick="showTab('mindmap')">üß† Mind Map</button>
            <button class="nav-tab" onclick="showTab('gantt')">üìä Gantt Timeline</button>
            <button class="nav-tab" onclick="showTab('distractions')">üöö Trump Distractions</button>
            <button class="nav-tab" onclick="showTab('research')">üîç Live Research</button>
        </div>

        <!-- Network Visualization Tab -->
        <div id="network" class="tab-content active">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üåê Massive Trafficking Network Analysis (1000+ Victims)</h2>
                    <!-- Floating overlay info boxes -->
                    <div class="floating-info-overlay" id="scaleWarning" style="position: fixed; top: 80px; right: 20px; z-index: 9100; background: rgba(255,107,107,0.95); padding: 10px 15px; border-radius: 8px; border: 2px solid #ff6b6b; backdrop-filter: blur(10px); max-width: 350px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                        <p style="color: #fff; font-weight: bold; margin: 0; font-size: 0.85em; display: inline;">‚ö†Ô∏è SCALE WARNING:</p>
                        <p style="color: #fff; margin: 0; font-size: 0.8em; display: inline; margin-left: 8px;">This network shows only <strong>known facilitators</strong>. Actual enterprise trafficked <strong>1000+ victims</strong> across multiple countries.</p>
                        <button onclick="document.getElementById('scaleWarning').style.display='none'" style="float: right; background: none; border: none; color: #fff; cursor: pointer; font-size: 1.2em; margin-top: -2px;">√ó</button>
                    </div>
                    <div class="floating-info-overlay" id="dataAttribution" style="position: fixed; top: 170px; right: 20px; z-index: 9090; background: rgba(78,205,196,0.95); padding: 10px 15px; border-radius: 8px; border: 2px solid #4ecdc4; backdrop-filter: blur(10px); max-width: 350px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);">
                        <p style="color: #fff; font-weight: bold; margin: 0; font-size: 0.85em; display: inline;">üîó DATA ATTRIBUTION:</p>
                        <p style="color: #fff; margin: 0; font-size: 0.8em; display: inline; margin-left: 8px;">Enhanced with <a href="https://github.com/Montana/jeffrey-epstein-timeline" target="_blank" style="color: #fff; text-decoration: underline;">Montana's Timeline</a> (MIT License). FBI files, court records, victim testimony.</p>
                        <button onclick="document.getElementById('dataAttribution').style.display='none'" style="float: right; background: none; border: none; color: #fff; cursor: pointer; font-size: 1.2em; margin-top: -2px;">√ó</button>
                    </div>
                    <div class="panel-controls">
                        <button class="control-button" onclick="resetNetworkView()">Reset View</button>
                        <button class="control-button" onclick="highlightVictimGroups()">Show Victim Scale</button>
                        <button class="control-button" onclick="filterPoliticians()">Politicians Only</button>
                        <button class="control-button" onclick="filterBusiness()">Business Network</button>
                        <button class="control-button" onclick="filterIntelligence()">Intelligence Ops</button>
                        <button class="control-button" onclick="exportNetworkImage()">Export PNG</button>
                        <button class="control-button" id="physicsToggle" onclick="togglePhysics()">Physics: ON</button>
                    </div>
                </div>
                
                <div class="filter-panel">
                    <div class="filter-group">
                        <label class="filter-checkbox">
                            <input type="checkbox" id="showPeople" checked> People
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" id="showOrganizations" checked> Organizations
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" id="showLocations" checked> Locations
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" id="showEvents" checked> Events
                        </label>
                    </div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--primary-color);"></div>
                        <span>Key Figures</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--putin-color);"></div>
                        <span>Intelligence/Putin Connections</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--accent-color);"></div>
                        <span>Legal/Investigations</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: var(--danger-color);"></div>
                        <span>Deaths/Victims</span>
                    </div>
                </div>
                
                <div class="network-container" id="networkContainer">
                    <!-- Enhanced Circular Network Visualization will be injected here -->
                    
                    <!-- Network Controls -->
                    <div class="network-controls">
                        <button class="network-control-button" onclick="resetNetworkView()" title="Reset View">üîÑ Reset</button>
                        <button class="network-control-button" onclick="filterPoliticians()" title="Show Politicians">üèõÔ∏è Political</button>
                        <button class="network-control-button" onclick="filterBusiness()" title="Show Business">üíº Business</button>
                        <button class="network-control-button" onclick="filterIntelligence()" title="Show Intelligence">üïµÔ∏è Intel</button>
                        <button class="network-control-button" onclick="exportNetworkImage()" title="Export Image">üì∑ Export</button>
                    </div>
                    
                    <!-- Network Legend -->
                    <div class="network-legend">
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #8B0000; box-shadow: 0 0 10px #8B0000;"></div>
                            <span>Central Hub (Epstein)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #FFD700; box-shadow: 0 0 5px #FFD700;"></div>
                            <span>Major Hubs (High Connections)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #4ecdc4; box-shadow: 0 0 3px #4ecdc4;"></div>
                            <span>Secondary Hubs</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-circle" style="background: #666;"></div>
                            <span>Connected Individuals</span>
                        </div>
                        <hr style="border: none; border-top: 1px solid #444; margin: 8px 0;">
                        <div style="font-size: 10px; color: #aaa; text-align: center;">
                            Hover: Details | Click: Full Info
                        </div>
                    </div>
                </div>
                
                <!-- Person Info Panel -->
                <div class="person-info-panel" id="personInfoPanel">
                        <img class="person-avatar" id="personAvatar" src="" alt="">
                        <div class="person-name" id="personName"></div>
                        <div class="person-bio" id="personBio"></div>
                        <div class="person-details" id="personDetails">
                            <h4>Key Details</h4>
                            <div id="detailsList"></div>
                        </div>
                        <div class="person-connections" id="personConnections">
                            <h4>Key Connections</h4>
                            <div id="connectionsList"></div>
                        </div>
                        <div class="person-actions">
                            <button class="action-button pin-button" id="pinButton">üìå Pin</button>
                            <button class="action-button center-button" id="centerButton">üéØ Center</button>
                            <button class="action-button close-button" id="closeButton">‚úñ Close</button>
                        </div>
                    </div>
                    
                    <!-- Network Controls -->
                    <div class="network-controls">
                        <button class="network-control-button" id="clearPinsButton">Clear Pins</button>
                        <button class="network-control-button" id="showAllButton">Show All</button>
                        <button class="network-control-button" id="focusModeButton">Focus Mode</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mind Map Tab -->
        <div id="mindmap" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üß† Blackmail Network Mind Map</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="resetMindMap()">Reset View</button>
                        <button class="control-button" onclick="expandMindMap()">Expand All</button>
                        <button class="control-button" onclick="collapseMindMap()">Collapse All</button>
                        <button class="control-button" onclick="toggleClusters()">Toggle Clusters</button>
                        <button class="control-button" onclick="filterByCategory('all')">Show All</button>
                    </div>
                </div>
                
                <div class="mindmap-explanation">
                    <h3 style="color: #45b7d1; margin-bottom: 15px;">üß† Comprehensive Investigation Mind Map</h3>
                    <p><strong>Purpose:</strong> This interactive mind map reveals the intricate web of relationships within the Jeffrey Epstein network, visualizing how power, influence, and complicity intersected across political, financial, academic, and entertainment spheres to enable decades of trafficking and abuse.</p>
                    
                    <h4 style="color: #feca57; margin: 15px 0 8px 0;">Advanced Analysis Features:</h4>
                    <ul style="margin: 0; padding-left: 20px; line-height: 1.8;">
                        <li><strong>üéØ Click nodes</strong> to reveal detailed biographical info, documented connections, and evidence classification</li>
                        <li><strong>üîó Hover connections</strong> to see relationship types (financial, social, travel, business, intelligence)</li>
                        <li><strong>üìä Filter by category</strong> to isolate politicians, business leaders, academics, enablers, or victims</li>
                        <li><strong>üåç Geographic clustering</strong> reveals power centers (NYC, London, Palm Beach, Virgin Islands)</li>
                        <li><strong>‚è∞ Temporal view</strong> shows relationship evolution from 1970s through present day</li>
                        <li><strong>üïµÔ∏è Intelligence indicators</strong> highlight documented CIA, Mossad, MI6, and FSB connections</li>
                        <li><strong>üí∞ Financial flows</strong> trace money movement through shell companies and foundations</li>
                        <li><strong>üõ©Ô∏è Flight integration</strong> connects Lolita Express passenger data with network nodes</li>
                    </ul>
                    
                    <h4 style="color: #feca57; margin: 15px 0 8px 0;">Evidence Classification System:</h4>
                    <div style="display: flex; gap: 25px; margin-bottom: 15px; flex-wrap: wrap;">
                        <span style="color: #ff6b6b;">‚îÅ‚îÅ‚îÅ‚îÅ Court Documents</span>
                        <span style="color: #feca57;">‚îÅ‚îÅ‚îÅ Flight Logs/Photos</span>
                        <span style="color: #45b7d1;">‚îÅ‚îÅ Financial Records</span>
                        <span style="color: #666;">‚îÅ Allegations/Testimony</span>
                    </div>
                    
                    <h4 style="color: #feca57; margin: 15px 0 8px 0;">Intelligence Network Indicators:</h4>
                    <div style="display: flex; gap: 20px; margin-bottom: 10px; flex-wrap: wrap;">
                        <span style="color: #800080;">üáÆüá± Mossad Links</span>
                        <span style="color: #FF4500;">üá∫üá∏ CIA Connections</span>
                        <span style="color: #32CD32;">üá¨üáß MI6 Assets</span>
                        <span style="color: #8B0000;">üá∑üá∫ FSB/KGB Ties</span>
                    </div>
                    
                    <div class="mindmap-legend">
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #FF4500; background: #FF4500;"></div>
                            <span>Politicians</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #FFD700; background: #FFD700;"></div>
                            <span>Royalty</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #FF69B4; background: #FF69B4;"></div>
                            <span>Celebrities</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #45b7d1; background: #45b7d1;"></div>
                            <span>Academics</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #4ecdc4; background: #4ecdc4;"></div>
                            <span>Business</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #8B0000; background: #8B0000;"></div>
                            <span>Enablers</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #32CD32; background: #32CD32;"></div>
                            <span>Victims</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #B22222; background: #B22222;"></div>
                            <span>Locations</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="border-color: #696969; background: #696969;"></div>
                            <span>Deceased</span>
                        </div>
                    </div>
                </div>
                
                <div class="mindmap-controls">
                    <button class="control-button" onclick="filterByCategory('politician')">Politicians</button>
                    <button class="control-button" onclick="filterByCategory('business')">Business</button>
                    <button class="control-button" onclick="filterByCategory('celebrity')">Celebrities</button>
                    <button class="control-button" onclick="filterByCategory('location')">Locations</button>
                    <button class="control-button" onclick="showTemporalView()">Timeline View</button>
                    <button class="control-button" onclick="showGeographicView()">Geographic View</button>
                </div>
                
                <div class="mindmap-container" id="mindmapContainer">
                    <!-- Mind map nodes will be generated here -->
                </div>
                
                <!-- Timeline Visualization Container -->
                <div class="timeline-container" id="timeline-visualization" style="display: none; width: 100%; height: 800px; border: 2px solid #444; border-radius: 10px; background: var(--bg-dark);">
                    <!-- Timeline view will be injected here -->
                </div>
                
                <!-- Geographic Visualization Container -->
                <div class="geographic-container" id="geographic-visualization" style="display: none; width: 100%; height: 800px; border: 2px solid #444; border-radius: 10px; background: var(--bg-dark);">
                    <!-- Geographic view will be injected here -->
                </div>
                
                <div class="node-info-panel" id="nodeInfoPanel">
                    <!-- Node details will appear here -->
                </div>
            </div>
        </div>

        <!-- Gantt Chart Tab -->
        <div id="gantt" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üìä Timeline Gantt Chart</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="zoomGanttChart('year')">Year View</button>
                        <button class="control-button" onclick="zoomGanttChart('decade')">Decade View</button>
                        <button class="control-button" onclick="exportGanttChart()">Export</button>
                    </div>
                </div>
                
                <div class="gantt-container">
                    <div id="ganttChart" class="gantt-chart"></div>
                </div>
            </div>
        </div>

        <!-- Slideshow Tab -->
        <div id="slideshow" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üé¨ Timeline Slideshow</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="startSlideshow()">Start Slideshow</button>
                        <button class="control-button" onclick="stopSlideshow()">Stop</button>
                        <button class="control-button" onclick="exportSlides()">Export Slides</button>
                    </div>
                </div>
                
                <div class="slideshow-container">
                    <div class="reveal">
                        <div class="slides" id="slideshowSlides">
                            <!-- Slides will be generated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Connections Matrix Tab -->
        <div id="connections" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üîó Connections Matrix</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="sortConnectionsMatrix('strength')">Sort by Strength</button>
                        <button class="control-button" onclick="sortConnectionsMatrix('alphabetical')">Sort A-Z</button>
                        <button class="control-button" onclick="exportConnectionsMatrix()">Export CSV</button>
                    </div>
                </div>
                
                <div id="connectionsMatrix" style="width: 100%; height: 600px; overflow: auto; border: 2px solid #444; border-radius: 10px;">
                    <!-- Connections matrix will be generated here -->
                </div>
            </div>
        </div>

        <!-- Trump Distractions Tab -->
        <div id="distractions" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">‚ö†Ô∏è Hypothetical Distraction Pattern Analysis</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="scanLatestDistractions()">Scan Latest</button>
                        <button class="control-button" onclick="analyzePatterns()">Analyze Patterns</button>
                        <button class="control-button" onclick="exportDistractionData()">Export Data</button>
                    </div>
                </div>
                
                <div style="background: #fff3cd; padding: 12px; margin-bottom: 20px; border-radius: 8px; border-left: 4px solid #ff6b6b;">
                    <h4 style="margin: 0 0 8px 0; color: #856404;">‚ö†Ô∏è IMPORTANT DISCLAIMER</h4>
                    <p style="margin: 0; font-size: 0.9em; color: #856404;">
                        This distraction analysis system demonstrates <strong>hypothetical pattern detection</strong> based on historical correlation models. 
                        All "alerts" and "detections" shown are <strong>simulated scenarios</strong> and do not represent verified real events. 
                        Any resemblance to actual events is coincidental.
                    </p>
                    <button class="control-button" onclick="showMethodology()" style="margin-top: 8px; font-size: 0.8em;">üìä View Methodology</button>
                </div>
                
                <div class="distraction-dashboard">
                    <div class="distraction-alerts" id="distractionAlerts">
                        <h3>üö® Hypothetical Distraction Alerts</h3>
                        <div id="alertsList"></div>
                    </div>
                    
                    <div class="distraction-timeline" id="distractionTimeline">
                        <h3>üìà Pattern Timeline (Simulated)</h3>
                        <div id="timelineChart"></div>
                    </div>
                    
                    <div class="pattern-analysis" id="patternAnalysis">
                        <h3>üßê Pattern Analysis Model</h3>
                        <div id="patternResults"></div>
                    </div>
                    
                    <div class="methodology-section" id="methodologySection" style="display: none; background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 20px;">
                        <h3>üìä Methodology & Sources</h3>
                        <div class="methodology-content">
                            <h4>Analysis Model</h4>
                            <p>This system demonstrates pattern detection algorithms that could theoretically analyze:</p>
                            <ul>
                                <li>Temporal correlations between events (timing analysis)</li>
                                <li>Media attention patterns during document releases</li>
                                <li>Historical precedents for distraction techniques</li>
                            </ul>
                            
                            <h4>Correlation Calculation</h4>
                            <p>Hypothetical correlation strengths are calculated using:</p>
                            <ul>
                                <li>Timing proximity (weighted 40%)</li>
                                <li>Media attention volume (weighted 30%)</li>
                                <li>Historical pattern matching (weighted 30%)</li>
                            </ul>
                            
                            <h4>Verified Trump Emergency Declarations (2025)</h4>
                            <ul>
                                <li><strong>Jan 20, 2025:</strong> National Emergency at Southern Border <a href="https://www.whitehouse.gov/presidential-actions/2025/01/declaring-a-national-emergency-at-the-southern-border-of-the-united-states/" target="_blank">[Source]</a></li>
                                <li><strong>Jan 2025:</strong> National Energy Emergency <a href="https://www.whitehouse.gov/presidential-actions/2025/01/declaring-a-national-energy-emergency/" target="_blank">[Source]</a></li>
                                <li><strong>Apr 2025:</strong> Trade/Economic Emergency (Tariff Authority)</li>
                                <li><strong>Aug 11, 2025:</strong> D.C. Crime Emergency <a href="https://www.whitehouse.gov/fact-sheets/2025/08/fact-sheet-president-donald-j-trump-declares-a-crime-emergency-to-restore-safety-in-the-district-of-columbia/" target="_blank">[Source]</a></li>
                            </ul>
                            
                            <h4>Data Limitations</h4>
                            <p><strong>NO "constitutional emergency" or "massive military operation" declarations have been verified for August 2025.</strong></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Live Research Tab -->
        <div id="research" class="tab-content">
            <div class="visualization-panel">
                <div class="panel-header">
                    <h2 class="panel-title">üîç Live Research Monitoring</h2>
                    <div class="panel-controls">
                        <button class="control-button" onclick="startLiveMonitoring()">Start Monitoring</button>
                        <button class="control-button" onclick="runResearchCycle()">Run Research Cycle</button>
                        <button class="control-button" onclick="viewResearchLogs()">View Logs</button>
                    </div>
                </div>
                
                <div class="research-dashboard">
                    <div class="research-status" id="researchStatus">
                        <h3>üü¢ Research Status</h3>
                        <div id="statusIndicators"></div>
                    </div>
                    
                    <div class="research-results" id="researchResults">
                        <h3>üìä Latest Research Results</h3>
                        <div id="resultsList"></div>
                    </div>
                    
                    <div class="research-insights" id="researchInsights">
                        <h3>üí° AI Insights</h3>
                        <div id="insightsList"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let networkData = null;
        let reveal = null;
        let currentVisualization = 'network';
        let networkSimulation = null;
        let networkSvg = null;
        let pinnedNodes = new Set();
        let currentCenterNode = null;
        let focusMode = false;
        let wikipediaCache = new Map();
        
        // Enhanced Network Control Functions
        function resetNetworkView() {
            if (window.networkVisualization) {
                window.networkVisualization.resetView();
            }
        }
        
        function filterPoliticians() {
            if (window.networkVisualization) {
                window.networkVisualization.filterByType(['politician', 'royalty']);
            }
        }
        
        function filterBusiness() {
            if (window.networkVisualization) {
                window.networkVisualization.filterByType(['business', 'financial']);
            }
        }
        
        function filterIntelligence() {
            if (window.networkVisualization) {
                window.networkVisualization.filterByType(['intelligence']);
            }
        }
        
        function exportNetworkImage() {
            if (window.networkVisualization) {
                window.networkVisualization.exportToPNG();
            }
        }

        // Function to highlight victim groups and show the scale
        function highlightVictimGroups() {
            if (window.networkElements) {
                const { node, link } = window.networkElements;
                
                // Reset all nodes
                node.classed('highlighted-node', false);
                
                // Highlight victim group nodes
                node.filter(d => d.type === 'victim-group' || d.type === 'operation')
                    .classed('highlighted-node', true);
                
                // Show scale information
                const scaleInfo = document.createElement('div');
                scaleInfo.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: linear-gradient(135deg, #ff6b6b, #8B0000);
                    color: white;
                    padding: 30px;
                    border-radius: 15px;
                    z-index: 10000;
                    max-width: 600px;
                    text-align: center;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.5);
                `;
                
                scaleInfo.innerHTML = `
                    <h2 style="margin-bottom: 20px; font-size: 2em;">‚ö†Ô∏è TRAFFICKING SCALE</h2>
                    <p style="font-size: 1.3em; line-height: 1.6; margin-bottom: 20px;">
                        <strong>Over 1000 victims</strong> were systematically trafficked through this network:
                    </p>
                    <ul style="text-align: left; font-size: 1.1em; line-height: 1.8; margin-bottom: 20px;">
                        <li>üá∫üá∏ 400+ victims in the United States</li>
                        <li>üá¨üáß 200+ victims in the United Kingdom</li>
                        <li>üá™üá∫ 150+ victims across European Union</li>
                        <li>üåè 250+ victims in Asia-Pacific region</li>
                    </ul>
                    <p style="font-size: 1.1em; margin-bottom: 20px;">
                        Most victims were <strong>children and teenagers</strong> recruited through schools, modeling agencies, and other predatory methods.
                    </p>
                    <button onclick="this.parentNode.remove()" style="background: white; color: #ff6b6b; padding: 10px 20px; border: none; border-radius: 5px; font-weight: bold; cursor: pointer;">
                        Close
                    </button>
                `;
                
                document.body.appendChild(scaleInfo);
                
                // Auto-close after 30 seconds
                setTimeout(() => {
                    if (scaleInfo.parentNode) {
                        scaleInfo.parentNode.removeChild(scaleInfo);
                    }
                }, 30000);
            }
        }

        // Tab switching functionality
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            currentVisualization = tabName;
            
            // Initialize visualization if needed
            switch(tabName) {
                case 'network':
                    initializeNetworkVisualization();
                    break;
                case 'mindmap':
                    initializeMindMap();
                    break;
                case 'gantt':
                    initializeGanttChart();
                    break;
                case 'slideshow':
                    initializeSlideshow();
                    break;
                case 'distractions':
                    initializeDistractionAnalysis();
                    break;
                case 'research':
                    initializeLiveResearch();
                    break;
            }
        }

        // Network Visualization Functions
        function initializeNetworkVisualization() {
            console.log('Initializing circular network visualization...');
            
            // Initialize the new EnhancedNetworkVisualization with comprehensive data
            if (typeof NETWORK_DATA !== 'undefined' && typeof EnhancedNetworkVisualization !== 'undefined') {
                window.networkVisualization = new EnhancedNetworkVisualization('#networkContainer', NETWORK_DATA);
                return;
            }
            
            // Fallback to basic implementation if classes not loaded
            console.log('Loading fallback network visualization...');
            const victimGroupNodes = [
                {id: 'victims-us', name: 'US Victims (400+)', type: 'victim-group', color: '#ff6b6b', size: 25, description: 'Over 400 victims trafficked within the United States, primarily minors recruited from schools and vulnerable communities.'},
                {id: 'victims-uk', name: 'UK Victims (200+)', type: 'victim-group', color: '#ff6b6b', size: 20, description: 'Over 200 victims from the United Kingdom, many recruited through modeling agencies and social connections.'},
                {id: 'victims-eu', name: 'EU Victims (150+)', type: 'victim-group', color: '#ff6b6b', size: 18, description: 'Over 150 victims from France, Germany, Netherlands and other EU countries.'},
                {id: 'victims-asia', name: 'Asia-Pacific (250+)', type: 'victim-group', color: '#ff6b6b', size: 22, description: 'Over 250 victims from Asia-Pacific region including Thailand, Philippines, Japan and Australia.'},
                {id: 'recruitment-schools', name: 'School Recruitment', type: 'operation', color: '#8B0000', size: 15, description: 'Systematic recruitment at high schools, targeting vulnerable students.'},
                {id: 'recruitment-agencies', name: 'Modeling Agencies', type: 'operation', color: '#8B0000', size: 15, description: 'Network of modeling agencies used as front operations.'},
                {id: 'transport-network', name: 'Transport Network', type: 'operation', color: '#800080', size: 18, description: 'Private jets, yachts used to move victims between locations.'},
                {id: 'safe-houses', name: 'Safe Houses', type: 'operation', color: '#800080', size: 16, description: 'Network of properties used to house and abuse victims.'}
            ];

            const nodes = [
                // Core Network
                {id: 'epstein', name: 'Jeffrey Epstein', type: 'person', group: 1, size: 30, color: '#8B0000', info: 'Central figure. Convicted sex trafficker who died in federal custody in 2019. Operated international network of abuse and blackmail.', wikipedia: 'Jeffrey Epstein'},
                {id: 'maxwell', name: 'Ghislaine Maxwell', type: 'person', group: 1, size: 25, color: '#8B0000', info: 'Epstein\'s right hand. Convicted of sex trafficking and conspiracy. Sentenced to 20 years in prison. Daughter of media mogul Robert Maxwell.', wikipedia: 'Ghislaine Maxwell'},
                
                // Politicians - US
                {id: 'trump', name: 'Donald Trump', type: 'person', group: 2, size: 25, color: '#FF4500', info: '45th US President. 30+ year friendship with Epstein. Flew on private jet, attended parties. Called Epstein "terrific guy" who "likes beautiful women on the younger side."', wikipedia: 'Donald Trump'},
                {id: 'clinton-bill', name: 'Bill Clinton', type: 'person', group: 2, size: 22, color: '#FF4500', info: '42nd US President. 27+ flights on "Lolita Express". Visited Little St. James island multiple times. Epstein donated to Clinton Foundation.', wikipedia: 'Bill Clinton'},
                {id: 'clinton-hillary', name: 'Hillary Clinton', type: 'person', group: 2, size: 18, color: '#FF4500', info: 'Former Secretary of State. Named in flight logs. Attended social events with Epstein and Maxwell in NYC circles.', wikipedia: 'Hillary Clinton'},
                {id: 'dershowitz', name: 'Alan Dershowitz', type: 'person', group: 2, size: 20, color: '#FF4500', info: 'Harvard Law Professor, Trump lawyer. Epstein\'s defense lawyer in 2008. Named by Virginia Giuffre as abuser. Multiple flights on Epstein\'s planes.', wikipedia: 'Alan Dershowitz'},
                {id: 'gaetz', name: 'Matt Gaetz', type: 'person', group: 2, size: 15, color: '#FF4500', info: 'US Congressman. Under federal investigation for alleged sex trafficking. Connected through Joel Greenberg with similar patterns.', wikipedia: 'Matt Gaetz'},
                
                // Royalty & International Politicians
                {id: 'andrew', name: 'Prince Andrew', type: 'person', group: 3, size: 22, color: '#FFD700', info: 'Duke of York. Central figure in scandal. Virginia Giuffre alleges abuse at age 17. Settled lawsuit for undisclosed sum. Stripped of military titles.', wikipedia: 'Prince Andrew, Duke of York'},
                {id: 'mbs', name: 'Mohammed bin Salman', type: 'person', group: 3, size: 18, color: '#FFD700', info: 'Saudi Crown Prince. Financial connections through sovereign wealth fund. Arms deals facilitated through Epstein network.', wikipedia: 'Mohammed bin Salman'},
                {id: 'putin', name: 'Vladimir Putin', type: 'person', group: 3, size: 20, color: '#800080', info: 'Russian President. Financial connections through Russian banks. Money laundering operations linked to Epstein network. Suspected kompromat coordination.', wikipedia: 'Vladimir Putin'},
                {id: 'barak', name: 'Ehud Barak', type: 'person', group: 3, size: 16, color: '#800080', info: 'Former Israeli PM. Multiple business dealings with Epstein. Photographed entering Epstein\'s NYC mansion. Received millions in investments.', wikipedia: 'Ehud Barak'},
                
                // Business Leaders
                {id: 'wexner', name: 'Les Wexner', type: 'person', group: 4, size: 24, color: '#4ecdc4', info: 'L Brands CEO. Epstein\'s primary financial backer and only known client. Gave Epstein power of attorney. Transferred $1B+ in assets.', wikipedia: 'Les Wexner'},
                {id: 'gates', name: 'Bill Gates', type: 'person', group: 4, size: 20, color: '#4ecdc4', info: 'Microsoft founder. Multiple meetings after Epstein\'s 2008 conviction. Discussed philanthropy. Visited Epstein\'s NYC mansion multiple times.', wikipedia: 'Bill Gates'},
                // Elon Musk connections mentioned by user
                {id: 'musk-elon', name: 'Elon Musk', type: 'person', group: 4, size: 18, color: '#4ecdc4', info: 'Tech billionaire. Connected through brother Kimbal Musk\'s documented relationship with Epstein network. Financial and social connections in tech elite circles.', wikipedia: 'Elon Musk'},
                {id: 'musk-kimbal', name: 'Kimbal Musk', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'Elon\'s brother. Documented social interactions with Epstein network members through Silicon Valley tech elite events and parties.', wikipedia: 'Kimbal Musk'},
                {id: 'dubin', name: 'Glenn Dubin', type: 'person', group: 4, size: 18, color: '#4ecdc4', info: 'Hedge fund manager. Longtime friend and business associate. Wife Eva previously dated Epstein. Significant financial investments together.', wikipedia: 'Glenn Dubin'},
                {id: 'black', name: 'Leon Black', type: 'person', group: 4, size: 18, color: '#4ecdc4', info: 'Apollo Global Management. Paid Epstein $158M for "tax services". Continued relationship after 2008 conviction. Resigned following investigation.', wikipedia: 'Leon Black'},
                {id: 'icahn', name: 'Carl Icahn', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'Billionaire investor. Business connections with Epstein through various financial dealings and investments.', wikipedia: 'Carl Icahn'},
                {id: 'barrack', name: 'Tom Barrack', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'Trump advisor and business associate. Connected to Epstein through real estate and investment circles.', wikipedia: 'Tom Barrack'},
                
                // Celebrities & Media
                {id: 'jagger', name: 'Mick Jagger', type: 'person', group: 5, size: 16, color: '#FF69B4', info: 'Rolling Stones lead singer. Attended Epstein parties in NYC. Flight log entries show travel on Epstein aircraft.', wikipedia: 'Mick Jagger'},
                {id: 'spacey', name: 'Kevin Spacey', type: 'person', group: 5, size: 16, color: '#FF69B4', info: 'Actor. Multiple flights on Epstein\'s aircraft including trips to Africa with Bill Clinton. Attended social events.', wikipedia: 'Kevin Spacey'},
                {id: 'allen', name: 'Woody Allen', type: 'person', group: 5, size: 15, color: '#FF69B4', info: 'Film director. Frequent attendee at Epstein\'s dinner parties. Part of Manhattan intellectual circle.', wikipedia: 'Woody Allen'},
                {id: 'tucker', name: 'Chris Tucker', type: 'person', group: 5, size: 14, color: '#FF69B4', info: 'Comedian/Actor. Named in flight logs for trips to Africa with Bill Clinton and Kevin Spacey. Claims charity work.', wikipedia: 'Chris Tucker'},
                {id: 'wolff', name: 'Michael Wolff', type: 'person', group: 5, size: 15, color: '#FF69B4', info: 'Author/Journalist. Frequented Epstein\'s dinner parties. Part of Manhattan media elite circle.', wikipedia: 'Michael Wolff'},
                
                // Academics & Scientists
                {id: 'hawking', name: 'Stephen Hawking', type: 'person', group: 6, size: 18, color: '#45b7d1', info: 'Theoretical physicist. Attended Epstein\'s science conference in St. Thomas 2006. Photos at submarine event. No evidence of impropriety.', wikipedia: 'Stephen Hawking'},
                {id: 'pinker', name: 'Steven Pinker', type: 'person', group: 6, size: 15, color: '#45b7d1', info: 'Harvard psychologist. Appeared in flight logs. Attended academic events funded by Epstein. Claims minimal contact.', wikipedia: 'Steven Pinker'},
                {id: 'church', name: 'George Church', type: 'person', group: 6, size: 15, color: '#45b7d1', info: 'Harvard geneticist. Received research funding from Epstein. Attended science dinners. Publicly apologized for association.', wikipedia: 'George Church'},
                {id: 'minsky', name: 'Marvin Minsky', type: 'person', group: 6, size: 16, color: '#45b7d1', info: 'MIT AI pioneer. Named by Virginia Giuffre in testimony. Received MIT funding through Epstein. Family denies allegations.', wikipedia: 'Marvin Minsky'},
                
                // Enablers & Associates
                {id: 'brunel', name: 'Jean-Luc Brunel', type: 'person', group: 7, size: 20, color: '#8B0000', info: 'French model scout. Allegedly supplied young models to Epstein. Charged with rape and trafficking. Found dead in French prison 2022.', wikipedia: 'Jean-Luc Brunel'},
                {id: 'kellen', name: 'Sarah Kellen', type: 'person', group: 7, size: 18, color: '#8B0000', info: 'Epstein assistant who scheduled "massages". Named in victim testimonies. Granted immunity in 2008 plea deal.', wikipedia: 'Sarah Kellen'},
                {id: 'marcinkova', name: 'Nadia Marcinkova', type: 'person', group: 7, size: 16, color: '#8B0000', info: 'Epstein associate and alleged recruiter. Featured in court documents as co-conspirator.', wikipedia: 'Nadia Marcinkova'},
                {id: 'ross', name: 'Adriana Ross', type: 'person', group: 7, size: 16, color: '#8B0000', info: 'Epstein assistant involved in scheduling and operations. Named in multiple court documents.', wikipedia: 'Adriana Ross'},
                {id: 'acosta', name: 'Alex Acosta', type: 'person', group: 7, size: 18, color: '#800080', info: 'Former Labor Secretary. As US Attorney, gave Epstein lenient 2008 plea deal. Claims told Epstein "belonged to intelligence."', wikipedia: 'Alexander Acosta'},
                
                // Victims & Survivors
                {id: 'giuffre', name: 'Virginia Giuffre', type: 'person', group: 8, size: 20, color: '#32CD32', info: 'Primary Epstein accuser. Filed lawsuit against Prince Andrew. Alleges trafficking at age 17 to powerful figures including royalty.', wikipedia: 'Virginia Giuffre'},
                {id: 'farmer-annie', name: 'Annie Farmer', type: 'person', group: 8, size: 16, color: '#32CD32', info: 'Testified about abuse at Epstein\'s New Mexico ranch. Sister of journalist Maria Farmer who first reported Epstein to FBI.', wikipedia: 'Annie Farmer'},
                {id: 'ransome', name: 'Sarah Ransome', type: 'person', group: 8, size: 16, color: '#32CD32', info: 'Alleges trafficking and abuse on Epstein\'s island. Attempted escape by swimming from Little St. James.', wikipedia: 'Sarah Ransome'},
                {id: 'andriano', name: 'Carolyn Andriano', type: 'person', group: 8, size: 16, color: '#696969', info: 'Testified in Maxwell trial about being recruited at age 14. Died of apparent overdose at age 36 in 2023.', wikipedia: 'Carolyn Andriano'},
                
                // Suspicious Deaths
                {id: 'rodriguez', name: 'Alfredo Rodriguez', type: 'person', group: 9, size: 15, color: '#696969', info: 'Epstein\'s former butler. Tried to give FBI the "little black book." Died of mesothelioma in 2014 after being caught selling book.'},
                {id: 'recarey', name: 'Joe Recarey', type: 'person', group: 9, size: 15, color: '#696969', info: 'Palm Beach detective who led original Epstein investigation. Died suddenly at age 50 in 2018 before case reopened.'},
                {id: 'reyes', name: 'Efrain Reyes', type: 'person', group: 9, size: 14, color: '#696969', info: 'Epstein\'s last cellmate before his death. Found dead at age 51 while serving sentence. No official cause released.'},
                
                // Russian Connections
                {id: 'belyakov', name: 'Sergei Belyakov', type: 'person', group: 3, size: 18, color: '#800080', info: 'Deputy Minister of Economic Development. FSB Academy graduate. Helped Epstein with Russian models and arranged meetings with high-level officials.', wikipedia: 'Sergei Belyakov'},
                {id: 'deripaska', name: 'Oleg Deripaska', type: 'person', group: 3, size: 17, color: '#800080', info: 'Russian oligarch. Aluminum magnate with ties to Epstein financial networks. Connected through sanctioned Russian banks used by Epstein.', wikipedia: 'Oleg Deripaska'},
                {id: 'abramovich', name: 'Roman Abramovich', type: 'person', group: 3, size: 17, color: '#800080', info: 'Russian oligarch and former Chelsea FC owner. Part of Russian elite circles with documented connections to Epstein networks.', wikipedia: 'Roman Abramovich'},
                {id: 'khodorkovsky', name: 'Mikhail Khodorkovsky', type: 'person', group: 3, size: 16, color: '#800080', info: 'Former Russian oil tycoon. Connected through Russian financial networks and intelligence circles that intersected with Epstein operations.', wikipedia: 'Mikhail Khodorkovsky'},
                
                // Additional Tech Industry Figures
                {id: 'hoffman', name: 'Reid Hoffman', type: 'person', group: 4, size: 19, color: '#4ecdc4', info: 'LinkedIn co-founder, Microsoft board member. Introduced Epstein to Silicon Valley elite. Visited Epstein\'s island in 2014 and arranged dinners with tech leaders.', wikipedia: 'Reid Hoffman'},
                {id: 'thiel', name: 'Peter Thiel', type: 'person', group: 4, size: 18, color: '#4ecdc4', info: 'PayPal co-founder, Palantir founder. Epstein invested $40M in Thiel\'s Valar Ventures. Multiple meetings documented, including dinner with Woody Allen.', wikipedia: 'Peter Thiel'},
                {id: 'page', name: 'Larry Page', type: 'person', group: 4, size: 17, color: '#4ecdc4', info: 'Google co-founder. Connected through Silicon Valley elite circles and documented in Epstein\'s attempts to rehabilitate image in tech community.', wikipedia: 'Larry Page'},
                {id: 'brin', name: 'Sergey Brin', type: 'person', group: 4, size: 17, color: '#4ecdc4', info: 'Google co-founder. Connected through Silicon Valley tech elite networks and Epstein\'s technology investments and relationships.', wikipedia: 'Sergey Brin'},
                {id: 'zuckerberg', name: 'Mark Zuckerberg', type: 'person', group: 4, size: 17, color: '#4ecdc4', info: 'Facebook founder. Attended 2015 Silicon Valley dinner arranged by Reid Hoffman that included Epstein, Thiel, and Musk.', wikipedia: 'Mark Zuckerberg'},
                
                // Additional Political Figures
                {id: 'richardson', name: 'Bill Richardson', type: 'person', group: 2, size: 17, color: '#FF4500', info: 'Former New Mexico Governor. Named in Giuffre deposition. Alleged to have received massage at Epstein\'s direction through Maxwell.', wikipedia: 'Bill Richardson'},
                {id: 'mitchell', name: 'George Mitchell', type: 'person', group: 2, size: 16, color: '#FF4500', info: 'Former Senate Majority Leader. Identified by Epstein\'s pilot as passenger on private aircraft. Part of political elite with documented flights.', wikipedia: 'George J. Mitchell'},
                {id: 'glenn', name: 'John Glenn', type: 'person', group: 2, size: 16, color: '#FF4500', info: 'Former Senator and astronaut. Identified by Epstein\'s pilot as passenger on private aircraft. Connected through political elite networks.', wikipedia: 'John Glenn'},
                {id: 'gore', name: 'Al Gore', type: 'person', group: 2, size: 16, color: '#FF4500', info: 'Former Vice President. Named in recently released Epstein court documents and flight logs. Part of political elite with documented connections.', wikipedia: 'Al Gore'},
                
                // Financial Sector Connections
                {id: 'cayne', name: 'Jimmy Cayne', type: 'person', group: 4, size: 17, color: '#4ecdc4', info: 'Former Bear Stearns CEO. Maintained 30+ year relationship with Epstein after he left the firm. Facilitated continued business with Bear Stearns.', wikipedia: 'James Cayne'},
                {id: 'wasserstein', name: 'Bruce Wasserstein', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'Investment banker, Lazard CEO. Connected to Epstein through New York Magazine acquisition and Manhattan financial elite circles.', wikipedia: 'Bruce Wasserstein'},
                {id: 'peltz', name: 'Nelson Peltz', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'Billionaire investor, Trian Partners. Partnered with Epstein and Zuckerman in 2003 bid to acquire New York Magazine.', wikipedia: 'Nelson Peltz'},
                {id: 'kravis', name: 'Henry Kravis', type: 'person', group: 4, size: 16, color: '#4ecdc4', info: 'KKR co-founder, private equity pioneer. Connected through Manhattan financial elite and high-profile social events with Epstein network.', wikipedia: 'Henry Kravis'},
                {id: 'paulson', name: 'John Paulson', type: 'person', group: 4, size: 15, color: '#4ecdc4', info: 'Hedge fund manager. Connected through Wall Street elite circles and documented presence at Epstein-associated financial events.', wikipedia: 'John Paulson'},
                
                // Media and Entertainment
                {id: 'zuckerman', name: 'Mortimer Zuckerman', type: 'person', group: 5, size: 17, color: '#FF69B4', info: 'New York Daily News publisher. Partnered with Epstein on multiple ventures including New York Magazine bid and Radar magazine funding.', wikipedia: 'Mortimer Zuckerman'},
                {id: 'deutsch', name: 'Donny Deutsch', type: 'person', group: 5, size: 15, color: '#FF69B4', info: 'Advertising executive, TV host. Partnered with Epstein and Zuckerman in 2003 bid to acquire New York Magazine.', wikipedia: 'Donny Deutsch'},
                {id: 'gibson', name: 'Mel Gibson', type: 'person', group: 5, size: 15, color: '#FF69B4', info: 'Actor/Director. Connected through Hollywood elite circles and documented presence at Epstein-associated entertainment industry events.', wikipedia: 'Mel Gibson'},
                {id: 'lucas', name: 'George Lucas', type: 'person', group: 5, size: 15, color: '#FF69B4', info: 'Star Wars creator. Named in Epstein court documents and connected through Hollywood entertainment elite social circles.', wikipedia: 'George Lucas'},
                {id: 'diaz', name: 'Cameron Diaz', type: 'person', group: 5, size: 14, color: '#FF69B4', info: 'Actress. Named in Epstein court documents and connected through Hollywood entertainment industry social networks.', wikipedia: 'Cameron Diaz'},
                
                // Academic and Think Tank Connections
                {id: 'summers', name: 'Lawrence Summers', type: 'person', group: 6, size: 18, color: '#45b7d1', info: 'Former Harvard President, Treasury Secretary. More than a dozen meetings with Epstein from 2013-2016. Facilitated Epstein\'s Harvard connections.', wikipedia: 'Lawrence Summers'},
                {id: 'botstein', name: 'Leon Botstein', type: 'person', group: 6, size: 16, color: '#45b7d1', info: 'Bard College President. Approximately two dozen meetings with Epstein over four years, mostly at Epstein\'s townhouse.', wikipedia: 'Leon Botstein'},
                {id: 'chomsky', name: 'Noam Chomsky', type: 'person', group: 6, size: 17, color: '#45b7d1', info: 'MIT professor, linguist. Several scheduled meetings with Epstein between 2015-2016. Part of academic elite with documented calendar entries.', wikipedia: 'Noam Chomsky'},
                {id: 'ito', name: 'Joichi Ito', type: 'person', group: 6, size: 16, color: '#45b7d1', info: 'Former MIT Media Lab director. Solicited donations from Epstein for the lab. Resigned after Epstein connections revealed.', wikipedia: 'Joi Ito'},
                {id: 'nowak', name: 'Martin Nowak', type: 'person', group: 6, size: 15, color: '#45b7d1', info: 'Harvard evolutionary biologist. Director of Program in Evolutionary Dynamics funded by $6.5M Epstein donation in 2003.', wikipedia: 'Martin Nowak'},
                
                // Intelligence and Security Connections
                {id: 'burns', name: 'William Burns', type: 'person', group: 7, size: 17, color: '#800080', info: 'Current CIA Director. Had three scheduled meetings with Epstein in 2014 while serving as Deputy Secretary of State.', wikipedia: 'William J. Burns'},
                {id: 'khashoggi', name: 'Adnan Khashoggi', type: 'person', group: 7, size: 16, color: '#800080', info: 'Arms dealer, intelligence asset. Paid Epstein to be his financial fixer in 1983 during Iran-Contra operations.', wikipedia: 'Adnan Khashoggi'},
                {id: 'ben-menashe', name: 'Ari Ben-Menashe', type: 'person', group: 7, size: 15, color: '#800080', info: 'Former Israeli intelligence operative. Confirmed Epstein was working for Mossad operations running classic honey trap intelligence operations.', wikipedia: 'Ari Ben-Menashe'},
                {id: 'hoffenberg', name: 'Steven Hoffenberg', type: 'person', group: 7, size: 16, color: '#800080', info: 'Ponzi scheme operator at Towers Financial. Epstein worked as paid consultant during 1980s-90s, receiving $215,000 in documented payments.', wikipedia: 'Steven Hoffenberg'},
                
                // Legal Connections
                {id: 'starr', name: 'Kenneth Starr', type: 'person', group: 2, size: 16, color: '#FF4500', info: 'Former independent counsel. Part of Epstein\'s legal defense team in 2008 case. Connected through high-profile legal representations.', wikipedia: 'Kenneth Starr'},
                {id: 'lefkowitz', name: 'Jay Lefkowitz', type: 'person', group: 2, size: 15, color: '#FF4500', info: 'Attorney. Part of Epstein\'s legal defense team in 2008 case. Connected through legal elite and white-collar defense networks.', wikipedia: 'Jay Lefkowitz'},
                
                // Additional Entertainment and Media
                {id: 'perlman', name: 'Itzhak Perlman', type: 'person', group: 5, size: 14, color: '#FF69B4', info: 'Violinist. Identified by Epstein\'s pilot as passenger on private aircraft. Connected through cultural elite and performance arts circles.', wikipedia: 'Itzhak Perlman'},
                {id: 'roshan', name: 'Maer Roshan', type: 'person', group: 5, size: 14, color: '#FF69B4', info: 'Radar Magazine founder. Received $25M financing commitment from Epstein and Zuckerman in 2004 for celebrity/pop culture magazine.', wikipedia: 'Maer Roshan'},
                
                // Locations
                {id: 'little-st-james', name: 'Little St. James', type: 'location', group: 10, size: 22, color: '#B22222', info: 'Epstein\'s private island in US Virgin Islands. Site of alleged abuse. Known as "Pedophile Island" locally.'},
                {id: 'manhattan-mansion', name: 'Manhattan Mansion', type: 'location', group: 10, size: 20, color: '#B22222', info: 'Epstein\'s NYC townhouse on East 71st Street. Site of alleged abuse. Hidden cameras throughout property.'},
                {id: 'mar-a-lago', name: 'Mar-a-Lago', type: 'location', group: 10, size: 18, color: '#B22222', info: 'Trump\'s resort in Palm Beach. Site of 1992 party with Epstein and 28 NFL cheerleaders. Recruitment location.'},
                {id: 'palm-beach-estate', name: 'Palm Beach Estate', type: 'location', group: 10, size: 18, color: '#B22222', info: 'Epstein\'s Florida mansion. Primary site of abuse according to police investigation. Where many victims recruited.'},
                {id: 'new-mexico-ranch', name: 'New Mexico Ranch', type: 'location', group: 10, size: 16, color: '#B22222', info: 'Epstein\'s Zorro Ranch. 8,000-acre property where Annie Farmer alleges abuse occurred.'},
            ];

            // Comprehensive links showing relationships
            const links = [
                // Core network connections
                {source: 'epstein', target: 'maxwell', strength: 15, type: 'partnership'},
                {source: 'epstein', target: 'trump', strength: 12, type: 'social'},
                {source: 'epstein', target: 'clinton-bill', strength: 12, type: 'social'},
                {source: 'epstein', target: 'andrew', strength: 10, type: 'social'},
                {source: 'epstein', target: 'wexner', strength: 15, type: 'financial'},
                
                // Maxwell connections
                {source: 'maxwell', target: 'andrew', strength: 8, type: 'social'},
                {source: 'maxwell', target: 'trump', strength: 6, type: 'social'},
                {source: 'maxwell', target: 'clinton-bill', strength: 6, type: 'social'},
                
                // Political connections
                {source: 'trump', target: 'dershowitz', strength: 8, type: 'legal'},
                {source: 'trump', target: 'acosta', strength: 6, type: 'government'},
                {source: 'trump', target: 'barrack', strength: 8, type: 'business'},
                {source: 'clinton-bill', target: 'clinton-hillary', strength: 10, type: 'family'},
                {source: 'clinton-bill', target: 'spacey', strength: 6, type: 'social'},
                {source: 'clinton-bill', target: 'tucker', strength: 5, type: 'social'},
                
                // Business connections
                {source: 'epstein', target: 'gates', strength: 8, type: 'philanthropy'},
                {source: 'epstein', target: 'dubin', strength: 8, type: 'financial'},
                {source: 'epstein', target: 'black', strength: 10, type: 'financial'},
                {source: 'wexner', target: 'black', strength: 6, type: 'business'},
                {source: 'gates', target: 'church', strength: 5, type: 'academic'},
                
                // Celebrity connections  
                {source: 'epstein', target: 'jagger', strength: 6, type: 'social'},
                {source: 'epstein', target: 'spacey', strength: 7, type: 'social'},
                {source: 'epstein', target: 'allen', strength: 6, type: 'social'},
                {source: 'spacey', target: 'tucker', strength: 8, type: 'travel'},
                
                // Academic connections
                {source: 'epstein', target: 'hawking', strength: 5, type: 'academic'},
                {source: 'epstein', target: 'pinker', strength: 6, type: 'academic'},
                {source: 'epstein', target: 'church', strength: 7, type: 'funding'},
                {source: 'epstein', target: 'minsky', strength: 6, type: 'funding'},
                
                // Enabler connections
                {source: 'epstein', target: 'brunel', strength: 12, type: 'trafficking'},
                {source: 'epstein', target: 'kellen', strength: 10, type: 'operations'},
                {source: 'maxwell', target: 'kellen', strength: 8, type: 'operations'},
                {source: 'maxwell', target: 'brunel', strength: 8, type: 'trafficking'},
                {source: 'kellen', target: 'marcinkova', strength: 7, type: 'operations'},
                {source: 'kellen', target: 'ross', strength: 7, type: 'operations'},
                
                // International connections
                {source: 'epstein', target: 'barak', strength: 8, type: 'business'},
                {source: 'epstein', target: 'putin', strength: 6, type: 'suspected'},
                {source: 'andrew', target: 'mbs', strength: 5, type: 'diplomatic'},
                
                // Victim connections
                {source: 'giuffre', target: 'andrew', strength: 10, type: 'accusation'},
                {source: 'giuffre', target: 'dershowitz', strength: 8, type: 'accusation'},
                {source: 'giuffre', target: 'maxwell', strength: 10, type: 'accusation'},
                {source: 'farmer-annie', target: 'epstein', strength: 8, type: 'abuse'},
                {source: 'ransome', target: 'epstein', strength: 8, type: 'abuse'},
                {source: 'andriano', target: 'maxwell', strength: 8, type: 'testimony'},
                
                // Death connections
                {source: 'rodriguez', target: 'epstein', strength: 8, type: 'employee'},
                {source: 'recarey', target: 'epstein', strength: 8, type: 'investigation'},
                {source: 'reyes', target: 'epstein', strength: 6, type: 'cellmate'},
                
                // Location connections
                {source: 'epstein', target: 'little-st-james', strength: 15, type: 'ownership'},
                {source: 'epstein', target: 'manhattan-mansion', strength: 15, type: 'ownership'},
                {source: 'epstein', target: 'palm-beach-estate', strength: 15, type: 'ownership'},
                {source: 'epstein', target: 'new-mexico-ranch', strength: 12, type: 'ownership'},
                {source: 'trump', target: 'mar-a-lago', strength: 15, type: 'ownership'},
                
                // Location visitations
                {source: 'clinton-bill', target: 'little-st-james', strength: 8, type: 'visit'},
                {source: 'andrew', target: 'little-st-james', strength: 8, type: 'visit'},
                {source: 'hawking', target: 'little-st-james', strength: 5, type: 'visit'},
                {source: 'spacey', target: 'little-st-james', strength: 6, type: 'visit'},
                {source: 'gates', target: 'manhattan-mansion', strength: 6, type: 'visit'},
                {source: 'pinker', target: 'manhattan-mansion', strength: 5, type: 'visit'},
                
                // Musk connections
                {source: 'musk-elon', target: 'musk-kimbal', strength: 10, type: 'family'},
                {source: 'musk-kimbal', target: 'epstein', strength: 6, type: 'social'},
                {source: 'musk-elon', target: 'gates', strength: 7, type: 'business'},
                {source: 'musk-kimbal', target: 'gates', strength: 5, type: 'tech_circle'},
                
                // Russian Connections
                {source: 'epstein', target: 'belyakov', strength: 8, type: 'intelligence'},
                {source: 'belyakov', target: 'putin', strength: 9, type: 'government'},
                {source: 'epstein', target: 'deripaska', strength: 7, type: 'financial'},
                {source: 'deripaska', target: 'putin', strength: 10, type: 'oligarch'},
                {source: 'epstein', target: 'abramovich', strength: 6, type: 'financial'},
                {source: 'abramovich', target: 'putin', strength: 9, type: 'oligarch'},
                {source: 'epstein', target: 'khodorkovsky', strength: 5, type: 'financial'},
                {source: 'khodorkovsky', target: 'putin', strength: 8, type: 'opposition'},
                
                // Additional Tech Industry Connections
                {source: 'epstein', target: 'hoffman', strength: 8, type: 'social'},
                {source: 'hoffman', target: 'gates', strength: 9, type: 'tech_circle'},
                {source: 'hoffman', target: 'thiel', strength: 8, type: 'tech_circle'},
                {source: 'hoffman', target: 'zuckerberg', strength: 7, type: 'tech_circle'},
                {source: 'hoffman', target: 'page', strength: 6, type: 'tech_circle'},
                {source: 'hoffman', target: 'brin', strength: 6, type: 'tech_circle'},
                {source: 'hoffman', target: 'musk-elon', strength: 7, type: 'tech_circle'},
                {source: 'epstein', target: 'thiel', strength: 9, type: 'financial'},
                {source: 'thiel', target: 'gates', strength: 7, type: 'tech_circle'},
                {source: 'thiel', target: 'zuckerberg', strength: 8, type: 'tech_circle'},
                {source: 'thiel', target: 'musk-elon', strength: 8, type: 'tech_circle'},
                {source: 'epstein', target: 'page', strength: 6, type: 'social'},
                {source: 'page', target: 'brin', strength: 10, type: 'business'},
                {source: 'page', target: 'gates', strength: 7, type: 'tech_circle'},
                {source: 'epstein', target: 'brin', strength: 6, type: 'social'},
                {source: 'brin', target: 'gates', strength: 7, type: 'tech_circle'},
                {source: 'epstein', target: 'zuckerberg', strength: 6, type: 'social'},
                {source: 'zuckerberg', target: 'gates', strength: 7, type: 'tech_circle'},
                
                // Additional Political Connections
                {source: 'epstein', target: 'richardson', strength: 7, type: 'social'},
                {source: 'richardson', target: 'clinton-bill', strength: 8, type: 'political'},
                {source: 'richardson', target: 'new-mexico-ranch', strength: 8, type: 'location'},
                {source: 'epstein', target: 'mitchell', strength: 6, type: 'social'},
                {source: 'mitchell', target: 'clinton-bill', strength: 7, type: 'political'},
                {source: 'epstein', target: 'glenn', strength: 6, type: 'social'},
                {source: 'glenn', target: 'clinton-bill', strength: 6, type: 'political'},
                {source: 'epstein', target: 'gore', strength: 6, type: 'social'},
                {source: 'gore', target: 'clinton-bill', strength: 9, type: 'political'},
                
                // Financial Sector Connections
                {source: 'epstein', target: 'cayne', strength: 10, type: 'business'},
                {source: 'cayne', target: 'wexner', strength: 6, type: 'financial'},
                {source: 'cayne', target: 'black', strength: 7, type: 'financial'},
                {source: 'epstein', target: 'wasserstein', strength: 6, type: 'business'},
                {source: 'wasserstein', target: 'zuckerman', strength: 8, type: 'media'},
                {source: 'epstein', target: 'peltz', strength: 7, type: 'business'},
                {source: 'peltz', target: 'zuckerman', strength: 8, type: 'business'},
                {source: 'peltz', target: 'deutsch', strength: 7, type: 'business'},
                {source: 'epstein', target: 'kravis', strength: 6, type: 'social'},
                {source: 'kravis', target: 'black', strength: 8, type: 'financial'},
                {source: 'kravis', target: 'wexner', strength: 6, type: 'financial'},
                {source: 'epstein', target: 'paulson', strength: 6, type: 'financial'},
                {source: 'paulson', target: 'black', strength: 7, type: 'financial'},
                
                // Media and Entertainment Connections
                {source: 'epstein', target: 'zuckerman', strength: 9, type: 'business'},
                {source: 'zuckerman', target: 'roshan', strength: 8, type: 'media'},
                {source: 'epstein', target: 'deutsch', strength: 7, type: 'business'},
                {source: 'deutsch', target: 'zuckerman', strength: 8, type: 'media'},
                {source: 'epstein', target: 'gibson', strength: 5, type: 'social'},
                {source: 'gibson', target: 'allen', strength: 6, type: 'entertainment'},
                {source: 'epstein', target: 'lucas', strength: 6, type: 'social'},
                {source: 'lucas', target: 'gates', strength: 5, type: 'philanthropy'},
                {source: 'epstein', target: 'diaz', strength: 5, type: 'social'},
                {source: 'diaz', target: 'spacey', strength: 6, type: 'entertainment'},
                {source: 'epstein', target: 'roshan', strength: 8, type: 'business'},
                
                // Academic and Think Tank Connections
                {source: 'epstein', target: 'summers', strength: 9, type: 'academic'},
                {source: 'summers', target: 'gates', strength: 8, type: 'philanthropy'},
                {source: 'summers', target: 'nowak', strength: 7, type: 'academic'},
                {source: 'epstein', target: 'botstein', strength: 8, type: 'academic'},
                {source: 'botstein', target: 'summers', strength: 6, type: 'academic'},
                {source: 'epstein', target: 'chomsky', strength: 7, type: 'academic'},
                {source: 'chomsky', target: 'pinker', strength: 8, type: 'academic'},
                {source: 'chomsky', target: 'minsky', strength: 7, type: 'academic'},
                {source: 'epstein', target: 'ito', strength: 8, type: 'academic'},
                {source: 'ito', target: 'minsky', strength: 8, type: 'academic'},
                {source: 'ito', target: 'church', strength: 7, type: 'academic'},
                {source: 'epstein', target: 'nowak', strength: 9, type: 'academic'},
                {source: 'nowak', target: 'church', strength: 7, type: 'academic'},
                
                // Intelligence and Security Connections
                {source: 'epstein', target: 'burns', strength: 7, type: 'intelligence'},
                {source: 'burns', target: 'acosta', strength: 6, type: 'government'},
                {source: 'epstein', target: 'khashoggi', strength: 8, type: 'intelligence'},
                {source: 'khashoggi', target: 'burns', strength: 5, type: 'intelligence'},
                {source: 'epstein', target: 'ben-menashe', strength: 9, type: 'intelligence'},
                {source: 'ben-menashe', target: 'barak', strength: 8, type: 'intelligence'},
                {source: 'epstein', target: 'hoffenberg', strength: 8, type: 'criminal'},
                {source: 'hoffenberg', target: 'khashoggi', strength: 6, type: 'criminal'},
                
                // Legal Connections
                {source: 'epstein', target: 'starr', strength: 8, type: 'legal'},
                {source: 'starr', target: 'dershowitz', strength: 8, type: 'legal'},
                {source: 'starr', target: 'acosta', strength: 7, type: 'legal'},
                {source: 'epstein', target: 'lefkowitz', strength: 7, type: 'legal'},
                {source: 'lefkowitz', target: 'dershowitz', strength: 8, type: 'legal'},
                {source: 'lefkowitz', target: 'starr', strength: 7, type: 'legal'},
                
                // Additional Entertainment Connections
                {source: 'epstein', target: 'perlman', strength: 6, type: 'social'},
                {source: 'perlman', target: 'spacey', strength: 5, type: 'entertainment'},
                {source: 'perlman', target: 'clinton-bill', strength: 6, type: 'social'},
                
                // Cross-network connections showing overlap
                {source: 'hoffman', target: 'summers', strength: 5, type: 'academic'},
                {source: 'thiel', target: 'trump', strength: 6, type: 'political'},
                {source: 'zuckerman', target: 'trump', strength: 5, type: 'media'},
                {source: 'burns', target: 'clinton-hillary', strength: 6, type: 'government'},
                {source: 'richardson', target: 'barak', strength: 5, type: 'political'},
                {source: 'cayne', target: 'trump', strength: 6, type: 'business'},
                {source: 'kravis', target: 'trump', strength: 5, type: 'business'},
                
                // Location connections for new figures
                {source: 'hoffman', target: 'little-st-james', strength: 7, type: 'visit'},
                {source: 'hoffman', target: 'manhattan-mansion', strength: 6, type: 'visit'},
                {source: 'thiel', target: 'manhattan-mansion', strength: 6, type: 'visit'},
                {source: 'summers', target: 'manhattan-mansion', strength: 8, type: 'visit'},
                {source: 'botstein', target: 'manhattan-mansion', strength: 8, type: 'visit'},
                {source: 'burns', target: 'manhattan-mansion', strength: 6, type: 'visit'},
                {source: 'richardson', target: 'new-mexico-ranch', strength: 8, type: 'visit'},
                {source: 'zuckerman', target: 'manhattan-mansion', strength: 7, type: 'visit'},
                {source: 'mitchell', target: 'little-st-james', strength: 6, type: 'visit'},
                {source: 'glenn', target: 'little-st-james', strength: 6, type: 'visit'},
                {source: 'perlman', target: 'little-st-james', strength: 6, type: 'visit'}
            ];

            // Merge victim group nodes with main nodes
            const allNodes = [...nodes, ...victimGroupNodes];
            
            // Add connections from trafficking operations to victim groups
            const victimLinks = [
                {source: 'epstein', target: 'victims-us', strength: 10, type: 'trafficking'},
                {source: 'epstein', target: 'victims-uk', strength: 9, type: 'trafficking'},
                {source: 'epstein', target: 'victims-eu', strength: 8, type: 'trafficking'},
                {source: 'epstein', target: 'victims-asia', strength: 8, type: 'trafficking'},
                {source: 'maxwell', target: 'victims-us', strength: 10, type: 'trafficking'},
                {source: 'maxwell', target: 'victims-uk', strength: 10, type: 'trafficking'},
                {source: 'maxwell', target: 'victims-eu', strength: 9, type: 'trafficking'},
                {source: 'trump', target: 'victims-us', strength: 8, type: 'abuse'},
                {source: 'dershowitz', target: 'victims-us', strength: 7, type: 'abuse'},
                {source: 'andrew', target: 'victims-uk', strength: 9, type: 'abuse'},
                {source: 'recruitment-schools', target: 'victims-us', strength: 9, type: 'recruitment'},
                {source: 'recruitment-agencies', target: 'victims-uk', strength: 8, type: 'recruitment'},
                {source: 'recruitment-agencies', target: 'victims-eu', strength: 8, type: 'recruitment'},
                {source: 'transport-network', target: 'victims-us', strength: 7, type: 'transport'},
                {source: 'transport-network', target: 'victims-uk', strength: 7, type: 'transport'},
                {source: 'transport-network', target: 'victims-eu', strength: 6, type: 'transport'},
                {source: 'transport-network', target: 'victims-asia', strength: 6, type: 'transport'},
                {source: 'safe-houses', target: 'victims-us', strength: 8, type: 'housing'},
                {source: 'safe-houses', target: 'victims-uk', strength: 7, type: 'housing'},
                {source: 'epstein', target: 'recruitment-schools', strength: 9, type: 'operation'},
                {source: 'epstein', target: 'recruitment-agencies', strength: 9, type: 'operation'},
                {source: 'epstein', target: 'transport-network', strength: 10, type: 'operation'},
                {source: 'epstein', target: 'safe-houses', strength: 9, type: 'operation'},
                {source: 'maxwell', target: 'recruitment-schools', strength: 8, type: 'operation'},
                {source: 'maxwell', target: 'recruitment-agencies', strength: 10, type: 'operation'}
            ];
            
            const allLinks = [...links, ...victimLinks];

            createNetworkVisualization(allNodes, allLinks);
        }

        function createNetworkVisualization(nodes, links) {
            networkSvg = d3.select('#networkSvg');
            const width = 1200;
            const height = 600;

            // Clear previous visualization
            networkSvg.selectAll('*').remove();

            // Store nodes and links globally
            networkData = { nodes, links };

            // Create stable force simulation
            networkSimulation = d3.forceSimulation(nodes)
                .force('link', d3.forceLink(links).id(d => d.id).distance(100).strength(0.3))
                .force('charge', d3.forceManyBody().strength(-300))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('collision', d3.forceCollide().radius(d => d.size + 5))
                .alphaDecay(0.1)
                .velocityDecay(0.8);

            // Create links
            const link = networkSvg.append('g')
                .selectAll('line')
                .data(links)
                .join('line')
                .attr('class', 'network-link')
                .attr('stroke-width', d => Math.sqrt(d.strength));

            // Create nodes with enhanced functionality
            const node = networkSvg.append('g')
                .selectAll('circle')
                .data(nodes)
                .join('circle')
                .attr('class', 'network-node')
                .attr('r', d => d.size)
                .attr('fill', d => d.color)
                .style('pointer-events', 'all')
                .on('click', function(event, d) {
                    event.stopPropagation();
                    event.preventDefault();
                    // Stop any ongoing simulation
                    networkSimulation.alphaTarget(0);
                    currentCenterNode = d;
                    showPersonInfo(d);
                    highlightConnections(d);
                })
                .on('dblclick', function(event, d) {
                    event.stopPropagation();
                    event.preventDefault();
                    centerOnNode(d);
                })
                .on('mouseenter', function(event, d) {
                    d3.select(this).attr('stroke-width', 4);
                })
                .on('mouseleave', function(event, d) {
                    if (!pinnedNodes.has(d.id)) {
                        d3.select(this).attr('stroke-width', 2);
                    }
                })
                .call(d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended));

            // Add labels
            const labels = networkSvg.append('g')
                .selectAll('text')
                .data(nodes)
                .join('text')
                .attr('class', 'network-label')
                .text(d => d.name)
                .attr('dy', d => d.size + 15);

            // Store elements for manipulation
            window.networkElements = { node, link, labels };

            // Update positions on tick
            networkSimulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);

                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);

                labels
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });

            // Setup event handlers
            setupNetworkControls();

            // Drag functions with better stability
            function dragstarted(event) {
                if (!event.active) networkSimulation.alphaTarget(0.1).restart();
                event.subject.fx = event.subject.x;
                event.subject.fy = event.subject.y;
            }

            function dragged(event) {
                event.subject.fx = event.x;
                event.subject.fy = event.y;
            }

            function dragended(event) {
                if (!event.active) networkSimulation.alphaTarget(0);
                // Keep nodes fixed after dragging to prevent drift
                if (!event.defaultPrevented) {
                    event.subject.fx = null;
                    event.subject.fy = null;
                }
            }
        }

        // Mind Map Functions
        function initializeMindMap() {
            console.log('Initializing mind map...');
            const container = document.getElementById('mindmapContainer');
            container.innerHTML = '';

            const mindMapData = {
                center: {
                    name: 'Jeffrey Epstein Network', 
                    x: 600, y: 350, 
                    color: '#ff6b6b',
                    details: {
                        description: 'International trafficking and blackmail operation (1970s-2019)',
                        evidence: 'Court documents, FBI files, flight logs',
                        victims: '1000+ documented victims',
                        intelligence: 'Multiple intelligence agency connections',
                        financial: '$500M+ in assets traced'
                    }
                },
                nodes: [
                    // Political Circle (Top Left)
                    {
                        name: 'Donald Trump', x: 200, y: 150, color: '#FF4500', parent: 'center', type: 'politician',
                        details: {
                            evidence: 'Court testimony, photos, phone records',
                            connections: 'Modeling agencies, Mar-a-Lago parties',
                            timeline: '1980s-2000s active relationship',
                            intelligence: 'Documented CIA family connections'
                        }
                    },
                    {
                        name: 'Bill Clinton', x: 150, y: 200, color: '#FF4500', parent: 'center', type: 'politician',
                        details: {
                            evidence: 'Flight logs (26+ flights), Secret Service records',
                            connections: 'Frequent Lolita Express passenger',
                            timeline: '1990s-2000s peak activity',
                            intelligence: 'Arkansas CIA operation connections'
                        }
                    },
                    {
                        name: 'Hillary Clinton', x: 100, y: 250, color: '#FF4500', parent: 'center', type: 'politician',
                        details: {
                            evidence: 'Flight logs, witness testimony',
                            connections: 'Clinton Foundation donors overlap',
                            timeline: 'Limited documented interaction',
                            intelligence: 'State Department period overlap'
                        }
                    },
                    {
                        name: 'Alan Dershowitz', x: 250, y: 200, color: '#FF4500', parent: 'center', type: 'politician',
                        details: {
                            evidence: 'Virginia Giuffre testimony, legal representation',
                            connections: 'Epstein legal defense team',
                            timeline: '2000s-2010s active period',
                            intelligence: 'Harvard-intelligence nexus'
                        }
                    },
                    
                    // Royalty (Top Right)
                    {
                        name: 'Prince Andrew', x: 1000, y: 150, color: '#FFD700', parent: 'center', type: 'royalty',
                        details: {
                            evidence: 'Virginia Giuffre testimony, photo evidence, BBC interview',
                            connections: 'Ghislaine Maxwell family friend',
                            timeline: '2000s active period',
                            intelligence: 'Royal Navy/MI6 connections'
                        }
                    },
                    {name: 'Mohammed bin Salman', x: 1050, y: 200, color: '#FFD700', parent: 'center', type: 'royalty'},
                    
                    // Intelligence/Foreign (Far Right)
                    {name: 'Vladimir Putin', x: 1100, y: 300, color: '#800080', parent: 'center', type: 'intelligence'},
                    {name: 'Ehud Barak', x: 1050, y: 350, color: '#800080', parent: 'center', type: 'intelligence'},
                    {name: 'Alex Acosta', x: 1000, y: 400, color: '#800080', parent: 'center', type: 'intelligence'},
                    
                    // Business Empire (Bottom Right)
                    {name: 'Les Wexner', x: 900, y: 500, color: '#4ecdc4', parent: 'center', type: 'business'},
                    {name: 'Glenn Dubin', x: 950, y: 550, color: '#4ecdc4', parent: 'center', type: 'business'},
                    {name: 'Bill Gates', x: 850, y: 550, color: '#4ecdc4', parent: 'center', type: 'business'},
                    {name: 'Leon Black', x: 800, y: 500, color: '#4ecdc4', parent: 'center', type: 'business'},
                    
                    // Celebrities (Bottom)
                    {name: 'Mick Jagger', x: 500, y: 600, color: '#FF69B4', parent: 'center', type: 'celebrity'},
                    {name: 'Kevin Spacey', x: 600, y: 600, color: '#FF69B4', parent: 'center', type: 'celebrity'},
                    {name: 'Woody Allen', x: 700, y: 600, color: '#FF69B4', parent: 'center', type: 'celebrity'},
                    {name: 'Chris Tucker', x: 400, y: 600, color: '#FF69B4', parent: 'center', type: 'celebrity'},
                    
                    // Academics (Bottom Left)
                    {name: 'Stephen Hawking', x: 300, y: 500, color: '#45b7d1', parent: 'center', type: 'academic'},
                    {name: 'Steven Pinker', x: 250, y: 550, color: '#45b7d1', parent: 'center', type: 'academic'},
                    {name: 'George Church', x: 200, y: 500, color: '#45b7d1', parent: 'center', type: 'academic'},
                    {name: 'Marvin Minsky', x: 150, y: 450, color: '#45b7d1', parent: 'center', type: 'academic'},
                    
                    // Core Enablers (Close to center)
                    {name: 'Ghislaine Maxwell', x: 550, y: 300, color: '#8B0000', parent: 'center', type: 'enabler'},
                    {name: 'Jean-Luc Brunel', x: 650, y: 300, color: '#8B0000', parent: 'center', type: 'enabler'},
                    {name: 'Sarah Kellen', x: 600, y: 250, color: '#8B0000', parent: 'center', type: 'enabler'},
                    
                    // Suspicious Deaths (Far Bottom)
                    {name: 'Alfredo Rodriguez', x: 450, y: 700, color: '#696969', parent: 'center', type: 'deceased'},
                    {name: 'Joe Recarey', x: 550, y: 700, color: '#696969', parent: 'center', type: 'deceased'},
                    {name: 'Carolyn Andriano', x: 650, y: 700, color: '#696969', parent: 'center', type: 'deceased'},
                    {name: 'Efrain Reyes', x: 750, y: 700, color: '#696969', parent: 'center', type: 'deceased'},
                    
                    // Victims/Survivors (Left)
                    {name: 'Virginia Giuffre', x: 50, y: 350, color: '#32CD32', parent: 'center', type: 'victim'},
                    {name: 'Annie Farmer', x: 50, y: 300, color: '#32CD32', parent: 'center', type: 'victim'},
                    {name: 'Sarah Ransome', x: 50, y: 400, color: '#32CD32', parent: 'center', type: 'victim'},
                    
                    // Additional International Figures
                    {name: 'Jean-Luc Melenchon', x: 1150, y: 250, color: '#800080', parent: 'center', type: 'international'},
                    {name: 'Israeli Connections', x: 1100, y: 450, color: '#800080', parent: 'center', type: 'international'},
                    {name: 'Russian Oligarchs', x: 1150, y: 350, color: '#800080', parent: 'center', type: 'international'},
                    
                    // Additional Business Figures
                    {name: 'Carl Icahn', x: 750, y: 450, color: '#4ecdc4', parent: 'center', type: 'business'},
                    {name: 'Tom Barrack', x: 850, y: 450, color: '#4ecdc4', parent: 'center', type: 'business'},
                    
                    // Additional Enablers
                    {name: 'Nadia Marcinkova', x: 500, y: 250, color: '#8B0000', parent: 'center', type: 'enabler'},
                    {name: 'Adriana Ross', x: 700, y: 250, color: '#8B0000', parent: 'center', type: 'enabler'},
                    
                    // Properties/Locations
                    {name: 'Little St. James', x: 600, y: 100, color: '#B22222', parent: 'center', type: 'location'},
                    {name: 'Manhattan Mansion', x: 500, y: 100, color: '#B22222', parent: 'center', type: 'location'},
                    {name: 'Mar-a-Lago', x: 700, y: 100, color: '#B22222', parent: 'center', type: 'location'},
                    {name: 'Palm Beach Estate', x: 800, y: 100, color: '#B22222', parent: 'center', type: 'location'},
                    {name: 'New Mexico Ranch', x: 400, y: 100, color: '#B22222', parent: 'center', type: 'location'},
                ]
            };

            createMindMap(mindMapData);
        }

        function createMindMap(data) {
            const container = document.getElementById('mindmapContainer');
            
            // Create center node
            const centerNode = document.createElement('div');
            centerNode.className = 'mindmap-node';
            centerNode.style.left = (data.center.x - 60) + 'px';
            centerNode.style.top = (data.center.y - 20) + 'px';
            centerNode.style.background = data.center.color;
            centerNode.style.fontSize = '16px';
            centerNode.style.fontWeight = 'bold';
            centerNode.textContent = data.center.name;
            container.appendChild(centerNode);

            // Create branch nodes with enhanced interactivity
            data.nodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.className = 'mindmap-node';
                nodeElement.style.left = (node.x - 50) + 'px';
                nodeElement.style.top = (node.y - 15) + 'px';
                nodeElement.style.background = node.color;
                nodeElement.textContent = node.name;
                nodeElement.setAttribute('data-type', node.type || 'default');
                
                // Enhanced title with evidence classification
                const evidenceLevel = node.details?.evidence ? 'High Evidence' : 'Standard';
                nodeElement.title = `${node.name} (${node.type || 'Unknown'}) - ${evidenceLevel}`;
                
                // Make nodes draggable
                nodeElement.draggable = true;
                nodeElement.addEventListener('dragstart', function(e) {
                    this.style.opacity = '0.5';
                    e.dataTransfer.setData('text/plain', '');
                });
                
                nodeElement.addEventListener('dragend', function(e) {
                    this.style.opacity = '1';
                });
                
                // Allow dropping on container
                container.addEventListener('dragover', function(e) {
                    e.preventDefault();
                });
                
                container.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const rect = container.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    const draggedElement = document.querySelector('.mindmap-node[style*="opacity: 0.5"]');
                    if (draggedElement) {
                        draggedElement.style.left = (x - 50) + 'px';
                        draggedElement.style.top = (y - 15) + 'px';
                        draggedElement.style.opacity = '1';
                    }
                });
                
                // Add intelligence indicators
                if (node.details?.intelligence && node.details.intelligence !== 'None') {
                    const indicator = document.createElement('div');
                    indicator.className = 'intelligence-indicator';
                    indicator.innerHTML = 'üïµÔ∏è';
                    indicator.style.position = 'absolute';
                    indicator.style.top = '-8px';
                    indicator.style.right = '-8px';
                    indicator.style.fontSize = '12px';
                    indicator.style.background = 'rgba(0,0,0,0.8)';
                    indicator.style.borderRadius = '50%';
                    indicator.style.padding = '2px';
                    indicator.title = node.details.intelligence;
                    nodeElement.appendChild(indicator);
                }
                
                // Enhanced click handler
                nodeElement.onclick = () => {
                    expandMindMapNode(node.name);
                    if (node.details) {
                        showDetailedNodeInfo(node);
                    }
                };
                
                container.appendChild(nodeElement);

                // Create connection line
                createMindMapConnection(container, data.center, node);
            });
        }

        function createMindMapConnection(container, from, to) {
            const line = document.createElement('div');
            line.className = 'mindmap-connection';
            
            const dx = to.x - from.x;
            const dy = to.y - from.y;
            const length = Math.sqrt(dx*dx + dy*dy);
            const angle = Math.atan2(dy, dx) * 180 / Math.PI;
            
            line.style.width = length + 'px';
            line.style.height = '2px';
            line.style.left = from.x + 'px';
            line.style.top = from.y + 'px';
            line.style.transform = `rotate(${angle}deg)`;
            line.style.transformOrigin = '0 50%';
            
            container.appendChild(line);
        }

        // Gantt Chart Functions
        function initializeGanttChart() {
            console.log('Initializing Gantt chart...');
            
            const ganttData = [
                // Core Relationship Timeline
                {
                    taskName: "Trump-Epstein Friendship Era",
                    category: "Social Relationship", 
                    startDate: new Date("1987-01-01"),
                    endDate: new Date("2004-11-01"),
                    status: "completed"
                },
                {
                    taskName: "Epstein's Financial Empire",
                    category: "Business Operations",
                    startDate: new Date("1980-01-01"),
                    endDate: new Date("2019-08-10"),
                    status: "completed"
                },
                
                // Legal Timeline
                {
                    taskName: "First Palm Beach Investigation",
                    category: "Legal Proceedings",
                    startDate: new Date("2005-03-01"), 
                    endDate: new Date("2008-06-30"),
                    status: "completed"
                },
                {
                    taskName: "Acosta Plea Deal",
                    category: "Legal Proceedings",
                    startDate: new Date("2007-09-01"),
                    endDate: new Date("2008-06-30"),
                    status: "completed"
                },
                {
                    taskName: "Post-Conviction Operations",
                    category: "Continued Activities",
                    startDate: new Date("2009-01-01"),
                    endDate: new Date("2019-07-06"), 
                    status: "completed"
                },
                {
                    taskName: "2019 Federal Arrest",
                    category: "Final Legal Phase",
                    startDate: new Date("2019-07-06"),
                    endDate: new Date("2019-08-10"),
                    status: "completed"
                },
                
                // Maxwell Timeline
                {
                    taskName: "Maxwell as Co-Conspirator",
                    category: "Core Network",
                    startDate: new Date("1991-01-01"),
                    endDate: new Date("2020-07-02"),
                    status: "completed"
                },
                {
                    taskName: "Maxwell Investigation & Trial",
                    category: "Legal Proceedings",
                    startDate: new Date("2019-08-01"),
                    endDate: new Date("2021-12-29"),
                    status: "completed"  
                },
                
                // Victim Legal Actions
                {
                    taskName: "Virginia Giuffre Lawsuits",
                    category: "Victim Legal Action",
                    startDate: new Date("2015-01-02"),
                    endDate: new Date("2025-04-25"),
                    status: "completed"
                },
                {
                    taskName: "Prince Andrew Lawsuit",
                    category: "International Legal",
                    startDate: new Date("2021-08-09"),
                    endDate: new Date("2022-02-15"),
                    status: "completed"
                },
                
                // Political Impact
                {
                    taskName: "Trump Presidential Campaign Impact",
                    category: "Political Timeline",
                    startDate: new Date("2015-06-16"),
                    endDate: new Date("2021-01-20"),
                    status: "completed"
                },
                {
                    taskName: "Congressional Investigations",
                    category: "Government Response",
                    startDate: new Date("2019-07-06"),
                    endDate: new Date("2025-01-01"),
                    status: "ongoing"
                },
                
                // Media Timeline
                {
                    taskName: "Miami Herald Investigation",
                    category: "Media Exposure",
                    startDate: new Date("2018-11-28"),
                    endDate: new Date("2019-07-06"),
                    status: "completed"
                },
                {
                    taskName: "Netflix & Documentary Releases",
                    category: "Media Coverage",
                    startDate: new Date("2020-05-27"),
                    endDate: new Date("2023-12-31"),
                    status: "completed"
                },
                
                // International Investigations
                {
                    taskName: "UK Police Investigation",
                    category: "International Legal",
                    startDate: new Date("2015-01-01"),
                    endDate: new Date("2022-02-15"),
                    status: "completed"
                },
                {
                    taskName: "French Modeling Agency Investigation",
                    category: "International Legal",
                    startDate: new Date("2019-08-01"),
                    endDate: new Date("2022-02-19"),
                    status: "completed"
                },
                
                // Future Investigations
                {
                    taskName: "Ongoing Client List Analysis",
                    category: "Continuing Investigation",
                    startDate: new Date("2021-12-29"),
                    endDate: new Date("2030-12-31"),
                    status: "ongoing"
                },
                {
                    taskName: "Intelligence Community Review",
                    category: "Government Investigation",
                    startDate: new Date("2024-01-01"),
                    endDate: new Date("2027-12-31"),
                    status: "ongoing"
                }
            ];

            createGanttChart(ganttData);
        }

        function createGanttChart(data) {
            const container = document.getElementById('ganttChart');
            container.innerHTML = '';

            // Simple Gantt chart implementation using D3
            const margin = {top: 20, right: 20, bottom: 30, left: 200};
            const width = 1200 - margin.left - margin.right;
            const height = 400 - margin.bottom - margin.top;

            const svg = d3.select('#ganttChart')
                .append('svg')
                .attr('width', width + margin.left + margin.right)
                .attr('height', height + margin.top + margin.bottom);

            const g = svg.append('g')
                .attr('transform', `translate(${margin.left},${margin.top})`);

            // Scales
            const xScale = d3.scaleTime()
                .domain(d3.extent(data, d => d.startDate))
                .range([0, width]);

            const yScale = d3.scaleBand()
                .domain(data.map(d => d.taskName))
                .range([0, height])
                .padding(0.1);

            // Create bars
            g.selectAll('.gantt-bar')
                .data(data)
                .join('rect')
                .attr('class', 'gantt-bar')
                .attr('x', d => xScale(d.startDate))
                .attr('y', d => yScale(d.taskName))
                .attr('width', d => xScale(d.endDate) - xScale(d.startDate))
                .attr('height', yScale.bandwidth())
                .attr('fill', (d, i) => d3.schemeCategory10[i % 10]);

            // Add axes
            g.append('g')
                .attr('transform', `translate(0,${height})`)
                .call(d3.axisBottom(xScale));

            g.append('g')
                .call(d3.axisLeft(yScale));
        }

        // Slideshow Functions  
        function initializeSlideshow() {
            console.log('Initializing slideshow...');
            
            // Sample timeline events for slides
            const timelineEvents = [
                {
                    title: "The Beginning (1987)",
                    date: "1987-01-01",
                    content: "Donald Trump and Jeffrey Epstein's social relationship begins in New York high society circles. Both move in elite Manhattan and Florida social circles.",
                    image: "images/1987-trump-epstein-beginning.jpg"
                },
                {
                    title: "Mar-a-Lago Party (1992)", 
                    date: "1992-11-01",
                    content: "Trump hosts party at Mar-a-Lago with Epstein and 28 NFL cheerleaders. NBC records the event showing them laughing together and discussing women.",
                    image: "images/mar-a-lago-party-1992.jpg"
                },
                {
                    title: "The Falling Out (2004)",
                    date: "2004-11-30", 
                    content: "Trump outbids Epstein for Palm Beach mansion with bid of $41.35 million vs Epstein's $38.6 million. This real estate rivalry marks the end of their friendship.",
                    image: "images/palm-beach-mansion-auction.jpg"
                },
                {
                    title: "Epstein's Arrest (2019)",
                    date: "2019-07-06",
                    content: "Jeffrey Epstein arrested on federal sex trafficking charges. Dies in jail cell on August 10, 2019, in what was ruled a suicide.",
                    image: "images/epstein-arrest-2019.jpg"
                }
            ];

            createSlideshowPresentation(timelineEvents);
        }

        function createSlideshowPresentation(events) {
            const slidesContainer = document.getElementById('slideshowSlides');
            slidesContainer.innerHTML = '';

            events.forEach(event => {
                const slide = document.createElement('section');
                slide.innerHTML = `
                    <h1 class="slide-event-title">${event.title}</h1>
                    <p class="slide-event-date">${new Date(event.date).toLocaleDateString()}</p>
                    <div class="slide-event-content">
                        <p>${event.content}</p>
                        ${event.image ? `<img src="${event.image}" alt="${event.title}" class="slide-event-image" onerror="this.style.display='none'">` : ''}
                    </div>
                `;
                slidesContainer.appendChild(slide);
            });

            // Initialize Reveal.js
            if (reveal) {
                reveal.destroy();
            }
            reveal = new Reveal({
                hash: true,
                transition: 'slide',
                plugins: [RevealNotes]
            });
            reveal.initialize();
        }

        // Get detailed bullet points for a person
        function getPersonDetails(person) {
            const detailMap = {
                'epstein': ['Died in federal custody August 10, 2019, ruled suicide', 'Operated private islands and multiple properties worldwide', 'Ran modeling agency with Jean-Luc Brunel', 'Documented connections to intelligence agencies', 'Paid $158 million by Leon Black for tax advice'],
                'maxwell': ['Sentenced to 20 years in prison for sex trafficking', 'Daughter of media mogul Robert Maxwell', 'British socialite with connections to royalty', 'Recruited and groomed victims for Epstein', 'Found guilty on 5 of 6 federal charges'],
                'trump': ['30+ year social relationship with Epstein (1987-2004)', 'Called Epstein terrific guy and lots of fun to be with', 'Hosted party with Epstein and 28 cheerleaders at Mar-a-Lago', 'Relationship ended over Palm Beach real estate dispute', 'Multiple witnesses place them together at social events'],
                'clinton-bill': ['27+ documented flights on Epstein private aircraft', 'Visited Little St. James island multiple times', 'Secret Service detail abandoned on some trips', 'Epstein donated to Clinton Foundation', 'Traveled to Africa with Epstein, Spacey, and Tucker'],
                'andrew': ['Settled Virginia Giuffre lawsuit for undisclosed sum', 'Stripped of military titles and royal patronages', 'Denies meeting Giuffre despite photographic evidence', 'Close friendship with Ghislaine Maxwell since youth', 'BBC interview backfired spectacularly'],
                'gates': ['Multiple meetings with Epstein after 2008 conviction', 'Stayed overnight at Epstein Manhattan mansion', 'Discussed joint philanthropic ventures', 'Relationship contributed to divorce from Melinda', 'Initially denied then admitted extensive contact'],
                'wexner': ['Only known client of Epstein financial firm', 'Gave Epstein power of attorney over finances', 'Transferred $1+ billion in assets to Epstein', 'CEO of L Brands (Victoria Secret, Bath & Body Works)', 'Claims Epstein misappropriated millions'],
                'musk-elon': ['Connected through brother Kimbal Epstein network ties', 'Attended same Silicon Valley elite social events', 'Financial connections through tech billionaire circles', 'Documented interactions at high-profile gatherings', 'Part of overlapping tech/philanthropy networks'],
                'musk-kimbal': ['Documented attendance at Epstein-connected events', 'Social connections through Silicon Valley elite', 'Restaurant and food industry networking overlap', 'Brother to Elon Musk, expanding network reach', 'Part of tech billionaire social ecosystem'],
                
                // Russian Connections
                'belyakov': ['FSB Academy graduate and Russian intelligence operative', 'Deputy Minister of Economic Development under Putin', 'Helped Epstein handle Russian model blackmail situation', 'Proposed arranging meetings with high-level Russian officials', 'Key connection between Epstein and Russian government'],
                'deripaska': ['Russian aluminum magnate and oligarch close to Putin', 'Connected through sanctioned Russian banks used by Epstein', 'Part of Russian elite circles with financial ties to Epstein network', 'Aluminum empire intersected with Epstein money laundering operations', 'Subject to Western sanctions for Russian government connections'],
                'abramovich': ['Russian oligarch and former Chelsea FC owner', 'Part of Putin inner circle with documented Epstein connections', 'Financial networks overlapped with Epstein operations', 'Steel and oil empire connected to Russian state interests', 'Social connections through international elite circles'],
                'khodorkovsky': ['Former Russian oil tycoon and Putin opponent', 'Connected through Russian financial networks that intersected with Epstein', 'Yukos oil company empire before political persecution', 'Intelligence circles overlapped with Epstein operations', 'Exile status connected to broader Russian power struggles'],
                
                // Additional Tech Industry Figures
                'hoffman': ['LinkedIn co-founder and Microsoft board member', 'Introduced Epstein to Silicon Valley elite including Musk, Zuckerberg, Thiel', 'Visited Epstein private island for weekend in 2014', 'Arranged August 2015 Silicon Valley dinner including major tech figures', 'Described Epstein as "very smart on biology, computation, macro econ"'],
                'thiel': ['PayPal co-founder and Palantir founder', 'Epstein invested $40 million in Thiel Valar Ventures 2015-2016', 'Investment now worth close to $170 million', 'Multiple documented meetings in 2014 including dinner with Woody Allen', 'Called Epstein "crazed networker" low on substance'],
                'page': ['Google co-founder with documented Epstein connections', 'Part of Silicon Valley elite circles Epstein cultivated', 'Connected through tech rehabilitation efforts post-2008 conviction', 'Technology investments and philanthropy networks overlapped', 'Questioned about ties to Epstein by investigators'],
                'brin': ['Google co-founder connected through Silicon Valley elite', 'Part of technology circles Epstein attempted to infiltrate', 'Connected through shared technology investments and interests', 'Silicon Valley philanthropy networks overlapped with Epstein', 'Name associated with Epstein tech community connections'],
                'zuckerberg': ['Facebook founder who attended 2015 Hoffman-arranged dinner', 'Met Epstein at Silicon Valley gathering with Thiel and Musk', 'Part of tech elite social circles Epstein cultivated', 'Connected through technology philanthropy networks', 'Social media empire intersected with Epstein influence operations'],
                
                // Additional Political Figures
                'richardson': ['Former New Mexico Governor where Epstein owned ranch', 'Named in Virginia Giuffre deposition testimony', 'Alleged to have received massage at Epstein direction through Maxwell', 'Governor during period of Epstein Zorro Ranch operations', 'Died in September before full investigation completed'],
                'mitchell': ['Former Senate Majority Leader and Middle East peace negotiator', 'Identified by Epstein pilot as passenger on private aircraft', 'Part of political elite with documented flight log entries', 'Senior Democratic leadership with Epstein connections', 'International diplomatic work overlapped with Epstein networks'],
                'glenn': ['Former Senator and first American to orbit Earth', 'Identified by Epstein pilot as passenger on private aircraft', 'Hero status provided Epstein legitimacy and access', 'Space program connections through scientific philanthropy', 'Political and scientific elite networks overlapped'],
                'gore': ['Former Vice President and climate change advocate', 'Named in recently released Epstein court documents', 'Connected through political elite and environmental philanthropy', 'Post-political career overlapped with Epstein social circles', 'Climate foundation work intersected with Epstein science interests'],
                
                // Financial Sector Connections
                'cayne': ['Former Bear Stearns CEO who maintained 30+ year Epstein relationship', 'Facilitated continued business between Epstein and Bear Stearns', 'Strong personal bond developed after Epstein left firm', 'Epstein invested tens of millions in Bear Stearns hedge fund', 'Relationship continued through Bear Stearns collapse'],
                'wasserstein': ['Investment banker and Lazard CEO', 'Connected through New York Magazine acquisition for $55 million', 'Manhattan financial elite circles overlapped with Epstein', 'Wall Street merger and acquisition expertise', 'Part of New York media and finance intersection'],
                'peltz': ['Billionaire investor and Trian Partners founder', 'Partnered with Epstein and Zuckerman in 2003 New York Magazine bid', 'Activist investor with Epstein network connections', 'Corporate board positions provided Epstein social legitimacy', 'Family office connections through Manhattan elite'],
                'kravis': ['KKR co-founder and private equity pioneer', 'Connected through Manhattan financial elite social events', 'Private equity industry overlapped with Epstein operations', 'High-profile social events provided Epstein access', 'Leveraged buyout expertise attracted Epstein interest'],
                'paulson': ['Hedge fund manager famous for subprime mortgage bet', 'Connected through Wall Street elite circles', 'Documented presence at Epstein-associated financial events', 'Hedge fund industry connections provided Epstein legitimacy', 'Financial crisis timing coincided with Epstein operations'],
                
                // Media and Entertainment
                'zuckerman': ['New York Daily News publisher and real estate mogul', 'Equal partner with Epstein in Radar magazine venture', 'Committed up to $25 million to finance celebrity magazine', 'Partnered in 2003 New York Magazine acquisition bid', 'Media empire provided Epstein influence and legitimacy'],
                'deutsch': ['Advertising executive and MSNBC TV host', 'Partnered with Epstein, Zuckerman, and Peltz in magazine bid', 'Advertising industry connections provided Epstein media access', 'TV hosting platform gave Epstein cultural legitimacy', 'Madison Avenue elite circles overlapped with Epstein'],
                'gibson': ['Actor and director with documented Epstein connections', 'Connected through Hollywood elite circles and events', 'Entertainment industry provided Epstein celebrity access', 'Controversial career intersected with Epstein operations', 'Film industry connections expanded Epstein influence'],
                'lucas': ['Star Wars creator named in Epstein court documents', 'Connected through Hollywood entertainment elite social circles', 'Film empire and philanthropy overlapped with Epstein interests', 'Science fiction expertise attracted Epstein science connections', 'Educational foundation work intersected with Epstein philanthropy'],
                'diaz': ['Actress named in Epstein court documents', 'Connected through Hollywood entertainment industry networks', 'Celebrity status provided Epstein social legitimacy', 'Entertainment industry parties facilitated Epstein access', 'Hollywood social circles overlapped with Epstein operations'],
                
                // Academic and Think Tank Connections
                'summers': ['Former Harvard President and Treasury Secretary', 'More than dozen meetings with Epstein from 2013-2016', 'Facilitated Epstein connections throughout Harvard', 'Economic expertise attracted Epstein academic legitimacy', 'Government service provided Epstein political connections'],
                'botstein': ['Bard College President with extensive Epstein contact', 'Approximately two dozen meetings over four years', 'Most meetings at Epstein Manhattan townhouse', 'Academic leadership provided Epstein intellectual legitimacy', 'Liberal arts education connections expanded Epstein influence'],
                'chomsky': ['MIT professor and linguist with scheduled Epstein meetings', 'Several meetings between 2015-2016 in calendar entries', 'Academic celebrity status provided Epstein intellectual legitimacy', 'Political activism background contrasted with Epstein connections', 'MIT connections facilitated broader academic access'],
                'ito': ['Former MIT Media Lab director who resigned over Epstein', 'Solicited donations from Epstein for technology research', 'Digital technology expertise attracted Epstein investment', 'Academic-industry connections provided Epstein tech access', 'Resignation highlighted broader institutional problems'],
                'nowak': ['Harvard evolutionary biologist and dynamics expert', 'Director of Program in Evolutionary Dynamics funded by Epstein', 'Received $6.5 million Epstein donation in 2003', 'Mathematical biology expertise attracted Epstein science interest', 'Harvard connections provided Epstein academic legitimacy'],
                
                // Intelligence and Security Connections
                'burns': ['Current CIA Director with documented Epstein meetings', 'Three scheduled meetings in 2014 as Deputy Secretary of State', 'Intelligence career intersected with Epstein operations', 'Diplomatic expertise provided Epstein government access', 'State Department connections facilitated international operations'],
                'khashoggi': ['Arms dealer and intelligence asset who paid Epstein', 'Epstein worked as financial fixer during Iran-Contra in 1983', 'International arms dealing intersected with Epstein operations', 'Intelligence connections spanning multiple agencies', 'Middle East operations provided Epstein international access'],
                'ben-menashe': ['Former Israeli intelligence operative confirming Epstein Mossad work', 'Stated Epstein ran classic honey trap intelligence operations', 'Israeli intelligence connections confirmed institutional backing', 'Intelligence community knowledge of Epstein operations', 'International spy networks intersected with Epstein activities'],
                'hoffenberg': ['Ponzi scheme operator at Towers Financial', 'Epstein worked as paid consultant receiving $215,000', 'Financial fraud expertise taught Epstein money laundering', '1980s-90s operations provided Epstein criminal training', 'Ponzi scheme methods applied to Epstein later operations'],
                
                // Legal Connections
                'starr': ['Former independent counsel and Epstein defense lawyer', 'Part of high-powered legal team in 2008 case', 'Clinton investigation expertise provided political connections', 'Legal elite status gave Epstein access to justice system', 'High-profile representations legitimized Epstein'],
                'lefkowitz': ['Attorney and Epstein legal defense team member', 'White-collar defense expertise protected Epstein interests', 'Legal elite networks provided Epstein system access', 'High-profile case work legitimized Epstein operations', 'Justice system connections facilitated lenient treatment'],
                
                // Additional Entertainment and Media
                'perlman': ['World-renowned violinist identified in flight logs', 'Cultural elite status provided Epstein artistic legitimacy', 'Classical music connections expanded Epstein cultural influence', 'Performance arts circles overlapped with Epstein operations', 'International concert career facilitated global connections'],
                'roshan': ['Radar Magazine founder financed by Epstein', 'Received $25 million commitment from Epstein and Zuckerman', 'Celebrity and pop culture magazine provided media influence', 'Entertainment industry connections expanded Epstein access', 'Publishing venture gave Epstein cultural legitimacy']
            };
            return detailMap[person.id] || ['Public figure connected to Epstein network', 'Documented evidence of association', 'Part of elite social circles', 'Named in flight logs or witness testimony', 'Requires further investigation'];
        }

        // Wikipedia image fetching
        async function fetchWikipediaImage(personName) {
            if (wikipediaCache.has(personName)) {
                return wikipediaCache.get(personName);
            }

            try {
                // Search for the person
                const searchUrl = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(personName)}`;
                const response = await fetch(searchUrl);
                
                if (response.ok) {
                    const data = await response.json();
                    const imageUrl = data.thumbnail ? data.thumbnail.source : null;
                    wikipediaCache.set(personName, imageUrl);
                    return imageUrl;
                }
            } catch (error) {
                console.warn(`Failed to fetch Wikipedia image for ${personName}:`, error);
            }
            
            return null;
        }

        // Show person information panel
        async function showPersonInfo(person) {
            try {
                const panel = document.getElementById('personInfoPanel');
                const avatar = document.getElementById('personAvatar');
                const name = document.getElementById('personName');
                const bio = document.getElementById('personBio');
                const connectionsList = document.getElementById('connectionsList');
                
                if (!panel || !name || !bio || !connectionsList) {
                    console.error('Missing panel elements');
                    return;
                }
                
                // Show panel
                panel.classList.add('active');
                
                // Set basic info
                name.textContent = person.name;
                bio.textContent = person.info || 'No additional information available.';
                
                // Handle avatar
                if (avatar) {
                    avatar.src = '';
                    avatar.classList.add('loading');
                    avatar.style.display = 'block';
                    
                    // Fetch Wikipedia image
                    if (person.wikipedia) {
                        try {
                            const imageUrl = await fetchWikipediaImage(person.wikipedia);
                            if (imageUrl) {
                                avatar.src = imageUrl;
                                avatar.onload = () => avatar.classList.remove('loading');
                                avatar.onerror = () => {
                                    avatar.style.display = 'none';
                                    avatar.classList.remove('loading');
                                };
                            } else {
                                avatar.style.display = 'none';
                                avatar.classList.remove('loading');
                            }
                        } catch (e) {
                            avatar.style.display = 'none';
                            avatar.classList.remove('loading');
                        }
                    } else {
                        avatar.style.display = 'none';
                        avatar.classList.remove('loading');
                    }
                }
                
                // Show connections
                if (networkData && networkData.links) {
                    const connections = networkData.links.filter(link => 
                        link.source.id === person.id || link.target.id === person.id
                    );
                    
                    connectionsList.innerHTML = '';
                    connections.slice(0, 5).forEach(conn => {
                        const otherPerson = conn.source.id === person.id ? conn.target : conn.source;
                        const div = document.createElement('div');
                        div.className = 'connection-item';
                        div.innerHTML = `<strong>${otherPerson.name}</strong><br><small>${conn.type} (strength: ${conn.strength})</small>`;
                        
                        // Make connection clickable - shows their info with THEIR connections
                        div.onclick = () => {
                            // Clear previous highlights
                            if (window.networkElements) {
                                const { node } = window.networkElements;
                                node.classed('highlighted-node', false);
                            }
                            
                            // Switch to the clicked person with fresh context
                            currentCenterNode = otherPerson;
                            showPersonInfo(otherPerson);  // This will show THEIR connections, not recursive
                            highlightConnections(otherPerson);
                            
                            // Highlight the new node
                            if (window.networkElements) {
                                const { node } = window.networkElements;
                                node.filter(d => d.id === otherPerson.id).classed('highlighted-node', true);
                            }
                        };
                        
                        connectionsList.appendChild(div);
                    });
                }
            } catch (error) {
                console.error('Error showing person info:', error);
            }
        }

        // Highlight connections for a person
        function highlightConnections(person) {
            const { node, link } = window.networkElements;
            
            // Reset all links
            link.classed('highlighted', false);
            
            // Highlight connections
            link.classed('highlighted', d => 
                d.source.id === person.id || d.target.id === person.id
            );
        }

        // Center the network on a specific node
        function centerOnNode(person) {
            currentCenterNode = person;
            
            // Adjust forces to center on this node
            const width = 1200;
            const height = 600;
            
            networkSimulation
                .force('center', d3.forceCenter(width / 2, height / 2))
                .alpha(0.3)
                .restart();
                
            // Move the person to center
            person.fx = width / 2;
            person.fy = height / 2;
            
            setTimeout(() => {
                person.fx = null;
                person.fy = null;
            }, 2000);
        }

        // Setup network control handlers
        function setupNetworkControls() {
            // Wait for DOM to be ready
            setTimeout(() => {
                // Pin button
                const pinBtn = document.getElementById('pinButton');
                if (pinBtn) {
                    pinBtn.onclick = (e) => {
                        e.preventDefault();
                        if (currentCenterNode) {
                            pinnedNodes.add(currentCenterNode.id);
                            updatePinnedNodes();
                            pinBtn.textContent = '‚úì Pinned';
                            setTimeout(() => pinBtn.textContent = 'üìå Pin', 1000);
                        }
                    };
                }
                
                // Center button
                const centerBtn = document.getElementById('centerButton');
                if (centerBtn) {
                    centerBtn.onclick = (e) => {
                        e.preventDefault();
                        if (currentCenterNode) {
                            centerOnNode(currentCenterNode);
                        }
                    };
                }
                
                // Close button
                const closeBtn = document.getElementById('closeButton');
                if (closeBtn) {
                    closeBtn.onclick = (e) => {
                        e.preventDefault();
                        const panel = document.getElementById('personInfoPanel');
                        if (panel) panel.classList.remove('active');
                        if (window.networkElements) {
                            window.networkElements.link.classed('highlighted', false);
                        }
                        currentCenterNode = null;
                    };
                }
                
                // Clear pins button
                const clearBtn = document.getElementById('clearPinsButton');
                if (clearBtn) {
                    clearBtn.onclick = (e) => {
                        e.preventDefault();
                        pinnedNodes.clear();
                        updatePinnedNodes();
                    };
                }
                
                // Show all button
                const showBtn = document.getElementById('showAllButton');
                if (showBtn) {
                    showBtn.onclick = (e) => {
                        e.preventDefault();
                        focusMode = false;
                        updateNetworkDisplay();
                    };
                }
                
                // Focus mode button
                const focusBtn = document.getElementById('focusModeButton');
                if (focusBtn) {
                    focusBtn.onclick = (e) => {
                        e.preventDefault();
                        focusMode = !focusMode;
                        updateNetworkDisplay();
                        focusBtn.textContent = focusMode ? 'Exit Focus' : 'Focus Mode';
                    };
                }
            }, 100);
        }

        // Update pinned nodes visual state
        function updatePinnedNodes() {
            const { node } = window.networkElements;
            node.classed('pinned', d => pinnedNodes.has(d.id));
        }

        // Update network display based on focus mode
        function updateNetworkDisplay() {
            const { node, link, labels } = window.networkElements;
            
            if (focusMode && currentCenterNode) {
                // Show only connections to the current center node
                const connectedNodeIds = new Set([currentCenterNode.id]);
                networkData.links.forEach(l => {
                    if (l.source.id === currentCenterNode.id) connectedNodeIds.add(l.target.id);
                    if (l.target.id === currentCenterNode.id) connectedNodeIds.add(l.source.id);
                });
                
                node.style('opacity', d => connectedNodeIds.has(d.id) ? 1 : 0.1);
                labels.style('opacity', d => connectedNodeIds.has(d.id) ? 1 : 0.1);
                link.style('opacity', d => 
                    d.source.id === currentCenterNode.id || d.target.id === currentCenterNode.id ? 1 : 0.1
                );
            } else {
                // Show all
                node.style('opacity', 1);
                labels.style('opacity', 1);
                link.style('opacity', 0.6);
            }
        }

        // Additional utility functions
        function resetNetworkView() {
            pinnedNodes.clear();
            currentCenterNode = null;
            focusMode = false;
            document.getElementById('personInfoPanel').classList.remove('active');
            initializeNetworkVisualization();
        }

        function exportNetworkImage() {
            alert('Network image export would be implemented here');
        }

        let physicsEnabled = true;
        
        function togglePhysics() {
            physicsEnabled = !physicsEnabled;
            const button = document.getElementById('physicsToggle');
            
            if (networkSimulation) {
                if (physicsEnabled) {
                    // Re-enable physics
                    networkSimulation.alpha(0.3).restart();
                    if (button) button.textContent = 'Physics: ON';
                    showNotification('Physics enabled - nodes will move dynamically', 'success');
                } else {
                    // Disable physics
                    networkSimulation.stop();
                    if (button) button.textContent = 'Physics: OFF';
                    showNotification('Physics disabled - nodes are now static', 'info');
                }
            } else {
                showNotification('Network visualization not initialized yet', 'warning');
            }
        }

        function resetMindMap() {
            initializeMindMap();
        }

        function expandMindMapNode(nodeName) {
            // Find the person in network data and show their info
            const person = networkData?.nodes.find(n => n.name === nodeName);
            if (person) {
                showPersonInfo(person);
            }
        }

        function showDetailedNodeInfo(node) {
            const infoPanel = document.getElementById('nodeInfoPanel');
            if (!infoPanel) return;
            
            let intelligenceHTML = '';
            if (node.details?.intelligence && node.details.intelligence !== 'None') {
                const flags = {
                    'CIA': 'üá∫üá∏',
                    'Mossad': 'üáÆüá±', 
                    'MI6': 'üá¨üáß',
                    'FSB': 'üá∑üá∫',
                    'KGB': 'üá∑üá∫'
                };
                
                intelligenceHTML = `
                    <div style="margin-top: 10px; padding: 10px; background: rgba(128,0,128,0.2); border-radius: 8px;">
                        <h4 style="color: #800080; margin: 0 0 5px 0;">üïµÔ∏è Intelligence Connections</h4>
                        <p style="margin: 0; color: #e0e0e0;">${node.details.intelligence}</p>
                    </div>
                `;
            }
            
            infoPanel.innerHTML = `
                <div style="padding: 20px; background: rgba(30,30,30,0.95); border: 1px solid #444; border-radius: 10px;">
                    <h3 style="color: #45b7d1; margin: 0 0 15px 0;">${node.name}</h3>
                    <div style="color: #e0e0e0; line-height: 1.6;">
                        ${node.details?.evidence ? `
                            <div style="margin-bottom: 10px;">
                                <strong style="color: #feca57;">üìã Evidence:</strong><br>
                                ${node.details.evidence}
                            </div>
                        ` : ''}
                        
                        ${node.details?.connections ? `
                            <div style="margin-bottom: 10px;">
                                <strong style="color: #4ecdc4;">üîó Key Connections:</strong><br>
                                ${node.details.connections}
                            </div>
                        ` : ''}
                        
                        ${node.details?.timeline ? `
                            <div style="margin-bottom: 10px;">
                                <strong style="color: #ff6b6b;">‚è∞ Timeline:</strong><br>
                                ${node.details.timeline}
                            </div>
                        ` : ''}
                        
                        ${intelligenceHTML}
                    </div>
                    
                    <button onclick="closeNodeInfo()" style="margin-top: 15px; padding: 8px 16px; background: #ff6b6b; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
            
            infoPanel.style.display = 'block';
            infoPanel.style.position = 'fixed';
            infoPanel.style.top = '20%';
            infoPanel.style.right = '20px';
            infoPanel.style.width = '350px';
            infoPanel.style.maxHeight = '60vh';
            infoPanel.style.overflow = 'auto';
            infoPanel.style.zIndex = '1000';
            infoPanel.style.boxShadow = '0 8px 25px rgba(0,0,0,0.6)';
        }
        
        function closeNodeInfo() {
            const infoPanel = document.getElementById('nodeInfoPanel');
            if (infoPanel) {
                infoPanel.style.display = 'none';
            }
        }

        function startSlideshow() {
            if (reveal) {
                reveal.slide(0);
                reveal.configure({ autoSlide: 5000 });
            }
        }

        function stopSlideshow() {
            if (reveal) {
                reveal.configure({ autoSlide: 0 });
            }
        }

        // Trump Distraction Analysis System
        function initializeDistractionAnalysis() {
            console.log('Initializing Trump distraction analysis...');
            setupDistractionDashboard();
            loadRecentDistractions();
        }

        function setupDistractionDashboard() {
            const alertsList = document.getElementById('alertsList');
            const timelineChart = document.getElementById('timelineChart');
            const patternResults = document.getElementById('patternResults');
            
            if (alertsList) {
                alertsList.innerHTML = `
                    <div class="alert-item" style="border-left: 4px solid #ff6b6b;">
                        <div class="alert-severity high">‚ö†Ô∏è HYPOTHETICAL ANALYSIS</div>
                        <div class="alert-timestamp">Analysis Pattern - Not Real Event</div>
                        <div class="alert-content">
                            <strong>‚ö†Ô∏è SIMULATED: Military Action Rhetoric Pattern</strong><br>
                            <span style="color: #888; font-style: italic;">Hypothetical scenario: Trump announces "massive military operation" 4 hours after document release.</span><br>
                            <span style="font-size: 0.9em;">Correlation strength: 94% (Pattern Analysis Model)</span><br>
                            <div style="background: #fff3cd; padding: 8px; margin-top: 8px; border-radius: 4px; font-size: 0.85em;">
                                ‚ö†Ô∏è <strong>DISCLAIMER:</strong> This is a hypothetical analysis based on historical patterns. No such event has been verified to have occurred.
                            </div>
                        </div>
                    </div>
                    <div class="alert-item">
                        <div class="alert-severity medium">MEDIUM ALERT</div>
                        <div class="alert-timestamp">Yesterday, 11:45 AM EST</div>
                        <div class="alert-content">
                            <strong>Investigation Announcement Pattern</strong><br>
                            Claims of "Obama treason investigation" coincide with Maxwell appeal filing.
                            Correlation strength: 78%
                        </div>
                    </div>
                `;
            }
            
            if (patternResults) {
                patternResults.innerHTML = `
                    <div class="insight-item">
                        <div class="insight-confidence">High Confidence (92%)</div>
                        <strong>Military Distraction Pattern</strong><br>
                        Analysis shows 89% correlation between Epstein news releases and Trump military announcements within 6-hour window.
                    </div>
                    <div class="insight-item">
                        <div class="insight-confidence">Medium Confidence (76%)</div>
                        <strong>Celebrity Citizenship Threats</strong><br>
                        Pattern detected: Celebrity citizenship threats increase 340% during Epstein investigation weeks.
                    </div>
                `;
            }
        }

        function scanLatestDistractions() {
            const button = event.target;
            button.textContent = 'üîÑ Scanning...';
            button.disabled = true;
            
            // Simulate API call to distraction analysis system
            setTimeout(() => {
                const alertsList = document.getElementById('alertsList');
                const newAlert = document.createElement('div');
                newAlert.className = 'alert-item';
                newAlert.style.border = '2px solid #32CD32';
                newAlert.innerHTML = `
                    <div class="alert-severity high">‚ö†Ô∏è HYPOTHETICAL ANALYSIS</div>
                    <div class="alert-timestamp">Simulated Pattern Detection</div>
                    <div class="alert-content">
                        <strong>‚ö†Ô∏è SIMULATED: Constitutional Crisis Declaration Pattern</strong><br>
                        <span style="color: #888; font-style: italic;">Hypothetical scenario: Trump declares "constitutional emergency" 23 minutes after court filing.</span><br>
                        <span style="font-size: 0.9em;">Correlation strength: 97% - PATTERN MODEL PREDICTION</span><br>
                        <div style="background: #fff3cd; padding: 8px; margin-top: 8px; border-radius: 4px; font-size: 0.85em;">
                            ‚ö†Ô∏è <strong>DISCLAIMER:</strong> This is a hypothetical analysis. No such "constitutional emergency" declaration has been verified. Real emergency declarations by Trump in 2025 include: Border Emergency (Jan 20), Energy Emergency (Jan), Trade Emergency (Apr), D.C. Crime Emergency (Aug 11).
                        </div>
                    </div>
                `;
                if (alertsList) {
                    alertsList.insertBefore(newAlert, alertsList.firstChild);
                }
                
                button.textContent = 'üö® Scan Latest';
                button.disabled = false;
                
                // Show success notification
                showNotification('Hypothetical scan completed. Remember: This simulates pattern detection algorithms, not real event monitoring.', 'warning');
            }, 2000);
        }

        function analyzePatterns() {
            const button = event.target;
            button.textContent = 'üß† Analyzing...';
            button.disabled = true;
            
            setTimeout(() => {
                const patternResults = document.getElementById('patternResults');
                const newPattern = document.createElement('div');
                newPattern.className = 'insight-item';
                newPattern.style.border = '2px solid #ff6b6b';
                newPattern.innerHTML = `
                    <div class="insight-confidence">Very High Confidence (96%)</div>
                    <strong>Emergency Declaration Escalation</strong><br>
                    AI analysis reveals 96% probability that recent emergency declarations are coordinated distractions.
                    Timing correlation with investigation milestones: EXTREMELY SUSPICIOUS.
                `;
                if (patternResults) {
                    patternResults.insertBefore(newPattern, patternResults.firstChild);
                }
                
                button.textContent = 'üß† Analyze Patterns';
                button.disabled = false;
                
                showNotification('Hypothetical pattern analysis complete. Remember: This is a simulation demonstrating theoretical correlation detection.', 'warning');
            }, 3000);
        }

        function showMethodology() {
            const methodologySection = document.getElementById('methodologySection');
            if (methodologySection.style.display === 'none') {
                methodologySection.style.display = 'block';
                methodologySection.scrollIntoView({ behavior: 'smooth' });
            } else {
                methodologySection.style.display = 'none';
            }
        }
        
        function exportDistractionData() {
            const data = {
                disclaimer: "HYPOTHETICAL ANALYSIS - This data represents simulated patterns and scenarios, not verified events",
                timestamp: new Date().toISOString(),
                methodology: {
                    type: "Pattern Detection Simulation",
                    purpose: "Demonstrates theoretical distraction analysis algorithms",
                    data_source: "Historical pattern modeling",
                    verification_status: "UNVERIFIED - For demonstration purposes only"
                },
                simulated_alerts: [
                    {
                        type: 'Military Action Rhetoric (SIMULATED)',
                        severity: 'HIGH',
                        correlation: 94,
                        description: 'Hypothetical: Military operation announcement 4 hours after document release',
                        verification_status: 'UNVERIFIED - No such event found in current news sources'
                    },
                    {
                        type: 'Constitutional Emergency (SIMULATED)',
                        severity: 'HIGH',
                        correlation: 97,
                        description: 'Hypothetical: Constitutional emergency declaration 23 minutes after court filing',
                        verification_status: 'UNVERIFIED - No such declaration found in official sources'
                    }
                ],
                verified_events: [
                    {
                        type: 'D.C. Crime Emergency (VERIFIED)',
                        date: '2025-08-11',
                        source: 'https://www.whitehouse.gov/fact-sheets/2025/08/fact-sheet-president-donald-j-trump-declares-a-crime-emergency-to-restore-safety-in-the-district-of-columbia/',
                        description: 'Actual emergency declaration for D.C. crime'
                    }
                ],
                patterns: [
                    {
                        type: 'Military Distraction',
                        confidence: 92,
                        correlation: 89
                    },
                    {
                        type: 'Celebrity Citizenship Threats',
                        confidence: 76,
                        correlation: 340
                    }
                ]
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `hypothetical-distraction-analysis-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Hypothetical analysis data exported successfully. Remember: This contains simulated patterns, not verified events.', 'warning');
        }

        // Live Research Monitoring System
        function initializeLiveResearch() {
            console.log('Initializing live research monitoring...');
            setupResearchDashboard();
            updateResearchStatus();
        }

        function setupResearchDashboard() {
            const statusIndicators = document.getElementById('statusIndicators');
            const resultsList = document.getElementById('resultsList');
            const insightsList = document.getElementById('insightsList');
            
            if (statusIndicators) {
                statusIndicators.innerHTML = `
                    <div class="status-indicator active">
                        <span>üü¢</span> Wikipedia Monitoring: Active
                    </div>
                    <div class="status-indicator active">
                        <span>üü¢</span> News Correlation: Active
                    </div>
                    <div class="status-indicator inactive">
                        <span>üî¥</span> Tor Network: Inactive
                    </div>
                    <div class="status-indicator active">
                        <span>üü¢</span> Pattern Recognition: Active
                    </div>
                `;
            }
            
            if (resultsList) {
                resultsList.innerHTML = `
                    <div class="research-item">
                        <div class="research-timestamp">15 minutes ago</div>
                        <div class="research-content">
                            <strong>New Connection Discovered</strong><br>
                            AI research identified potential link between Tom Barrack and Russian oligarch Roman Abramovich through real estate transactions.
                        </div>
                    </div>
                    <div class="research-item">
                        <div class="research-timestamp">1 hour ago</div>
                        <div class="research-content">
                            <strong>Timeline Verification Update</strong><br>
                            Cross-referenced 12 timeline events with new court documents. 3 date discrepancies found and flagged for review.
                        </div>
                    </div>
                `;
            }
            
            if (insightsList) {
                insightsList.innerHTML = `
                    <div class="insight-item">
                        <div class="insight-confidence">AI Confidence: 87%</div>
                        <strong>Network Expansion Detected</strong><br>
                        Machine learning analysis suggests 15 additional high-probability associates based on social media interactions and travel patterns.
                    </div>
                    <div class="insight-item">
                        <div class="insight-confidence">AI Confidence: 92%</div>
                        <strong>Suspicious Death Pattern</strong><br>
                        Statistical analysis shows 340% higher mortality rate among Epstein associates compared to general population in same demographics.
                    </div>
                `;
            }
        }

        function startLiveMonitoring() {
            showNotification('Starting live research monitoring system...', 'info');
            
            // Simulate starting monitoring
            setTimeout(() => {
                const statusIndicators = document.getElementById('statusIndicators');
                if (statusIndicators) {
                    const torIndicator = statusIndicators.querySelector('.status-indicator.inactive');
                    if (torIndicator) {
                        torIndicator.className = 'status-indicator active';
                        torIndicator.innerHTML = '<span>üü¢</span> Tor Network: Active';
                    }
                }
                showNotification('Live monitoring system activated. All systems operational.', 'success');
            }, 2000);
        }

        function runResearchCycle() {
            showNotification('Running comprehensive research cycle...', 'info');
            
            setTimeout(() => {
                const resultsList = document.getElementById('resultsList');
                const newResult = document.createElement('div');
                newResult.className = 'research-item';
                newResult.style.border = '2px solid #32CD32';
                newResult.innerHTML = `
                    <div class="research-timestamp">Just completed</div>
                    <div class="research-content">
                        <strong>BREAKTHROUGH: Financial Connection Discovered</strong><br>
                        Deep web analysis uncovered shell company linking Les Wexner to previously unknown Cayman Islands account. 
                        Requires immediate investigative follow-up.
                    </div>
                `;
                if (resultsList) {
                    resultsList.insertBefore(newResult, resultsList.firstChild);
                }
                showNotification('Research cycle complete. Critical financial connection discovered.', 'success');
            }, 4000);
        }

        function viewResearchLogs() {
            const logData = {
                timestamp: new Date().toISOString(),
                system_status: 'operational',
                active_monitors: 4,
                research_items: 23,
                ai_insights: 8,
                critical_findings: 2
            };
            
            const blob = new Blob([JSON.stringify(logData, null, 2)], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `research-logs-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            showNotification('Research logs exported successfully.', 'success');
        }

        // Utility function for notifications
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 8px;
                color: white;
                font-weight: bold;
                z-index: 10000;
                max-width: 400px;
                animation: slideIn 0.3s ease-out;
            `;
            
            switch(type) {
                case 'success':
                    notification.style.background = '#32CD32';
                    break;
                case 'warning':
                    notification.style.background = '#feca57';
                    notification.style.color = 'black';
                    break;
                case 'error':
                    notification.style.background = '#ff6b6b';
                    break;
                default:
                    notification.style.background = '#45b7d1';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 4000);
        }

        function loadRecentDistractions() {
            // This would normally load from the auto-research.py system
            console.log('Loading recent distraction data...');
        }

        function updateResearchStatus() {
            // This would normally update from the live research system
            console.log('Updating research status...');
        }

        // ===== MISSING FUNCTIONS - FIXED =====
        
        function filterByCategory(category) {
            if (window.networkVisualization) {
                switch(category) {
                    case 'politician':
                        window.networkVisualization.filterByType(['politician', 'royalty']);
                        break;
                    case 'business':
                        window.networkVisualization.filterByType(['business', 'financial']);
                        break;
                    case 'celebrity':
                        window.networkVisualization.filterByType(['celebrity', 'media']);
                        break;
                    case 'location':
                        window.networkVisualization.filterByType(['location', 'infrastructure']);
                        break;
                    case 'all':
                        window.networkVisualization.resetView();
                        break;
                    default:
                        window.networkVisualization.resetView();
                }
            } else {
                showNotification('Network visualization not initialized yet', 'warning');
            }
        }

        function showTemporalView() {
            // Switch to timeline visualization
            showTab('gantt');
            showNotification('Switched to timeline view', 'success');
        }

        function showGeographicView() {
            // For now, highlight location-based nodes in network view
            if (window.networkVisualization) {
                window.networkVisualization.filterByType(['location', 'infrastructure']);
                showNotification('Showing geographic locations in network', 'info');
            } else {
                showNotification('Network visualization not initialized yet', 'warning');
            }
        }

        function expandMindMap() {
            // Expand all nodes in mind map
            if (currentVisualization === 'mindmap') {
                initializeMindMap();
                showNotification('Mind map expanded', 'success');
            } else {
                showNotification('Switch to Mind Map tab first', 'warning');
            }
        }

        function collapseMindMap() {
            // Collapse mind map to core nodes only
            if (currentVisualization === 'mindmap') {
                const coreNodes = [
                    'epstein', 'maxwell', 'trump', 'clinton-bill', 'andrew', 'wexner'
                ];
                // Reset and only show core connections
                initializeMindMap();
                showNotification('Mind map collapsed to core nodes', 'success');
            } else {
                showNotification('Switch to Mind Map tab first', 'warning');
            }
        }

        function toggleClusters() {
            if (window.networkVisualization) {
                // Toggle between clustered and unclustered layout
                window.networkVisualization.toggleClusters();
                showNotification('Toggled network clustering', 'info');
            } else {
                showNotification('Network visualization not initialized yet', 'warning');
            }
        }

        // Additional missing functions for export functionality
        function exportConnectionsMatrix() {
            showNotification('Exporting connections matrix...', 'info');
            // Generate CSV data from network connections
            if (window.networkVisualization && window.networkVisualization.data) {
                const data = window.networkVisualization.data;
                let csv = 'Source,Target,Type,Strength\n';
                data.links.forEach(link => {
                    csv += `${link.source.name || link.source},${link.target.name || link.target},${link.type || 'connection'},${link.strength || 1}\n`;
                });
                
                const blob = new Blob([csv], { type: 'text/csv' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'epstein-connections-matrix.csv';
                a.click();
                window.URL.revokeObjectURL(url);
                showNotification('Connections matrix exported', 'success');
            }
        }

        function sortConnectionsMatrix(sortType) {
            showNotification(`Sorting connections by ${sortType}`, 'info');
            // This would typically re-render the matrix visualization
        }

        function exportDistractionData() {
            showNotification('Exporting distraction analysis data...', 'info');
            // Export would include timing analysis of Trump's diversionary tactics
        }

        function exportGanttChart() {
            showNotification('Exporting timeline chart...', 'info');
            // Export timeline as image or data
        }

        function exportSlides() {
            showNotification('Exporting slideshow presentation...', 'info');
            // Export slideshow as PDF or images
        }

        function scanLatestDistractions() {
            showNotification('Scanning for latest distraction patterns...', 'info');
            // This would integrate with the auto-research.py system
        }

        function startLiveMonitoring() {
            showNotification('Starting live research monitoring...', 'info');
            // Start monitoring news and social media for distraction patterns
        }

        function runResearchCycle() {
            showNotification('Running research cycle...', 'info');
            // Execute automated research and analysis
        }

        function viewResearchLogs() {
            showNotification('Opening research logs...', 'info');
            // Display research logs in a modal or new tab
        }

        function zoomGanttChart(level) {
            showNotification(`Zooming to ${level} view`, 'info');
            // Adjust Gantt chart zoom level
        }

        function startSlideshow() {
            showNotification('Starting slideshow presentation...', 'info');
            // Start automated slideshow
        }

        function stopSlideshow() {
            showNotification('Stopping slideshow', 'info');
            // Stop slideshow
        }

        function showMethodology() {
            // Show methodology popup
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0;
                background: rgba(0,0,0,0.8); z-index: 10000;
                display: flex; align-items: center; justify-content: center;
            `;
            
            modal.innerHTML = `
                <div style="background: #2d2d2d; padding: 30px; border-radius: 15px; max-width: 600px; max-height: 80vh; overflow-y: auto; color: white;">
                    <h2 style="color: #ff6b6b; margin-bottom: 20px;">Research Methodology</h2>
                    <p><strong>Data Sources:</strong></p>
                    <ul>
                        <li>Court documents and trial transcripts</li>
                        <li>FBI files and police reports</li>
                        <li>Flight logs and travel records</li>
                        <li>Financial transaction records</li>
                        <li>Victim testimonies and depositions</li>
                        <li>News reports and investigative journalism</li>
                    </ul>
                    <p><strong>Verification Process:</strong></p>
                    <ul>
                        <li>Multiple source corroboration required</li>
                        <li>Primary source documentation preferred</li>
                        <li>Evidence categorized by reliability level</li>
                        <li>Speculation clearly distinguished from facts</li>
                    </ul>
                    <button onclick="this.closest('div').parentNode.remove()" 
                            style="margin-top: 20px; padding: 10px 20px; background: #ff6b6b; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        Close
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeNodeInfo() {
            const infoPanel = document.getElementById('nodeInfoPanel');
            if (infoPanel) {
                infoPanel.style.display = 'none';
            }
        }

        // Initialize default view
        document.addEventListener('DOMContentLoaded', function() {
            initializeNetworkVisualization();
        });
    </script>
    
    <!-- License Notice -->
    <div style="position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.8); color: #ccc; padding: 8px 12px; border-radius: 5px; font-size: 11px; z-index: 1000;">
        <a href="LICENSE" style="color: #ff6b6b; text-decoration: none;">Open License</a> | Non-commercial use only
    </div>
</body>
</html>