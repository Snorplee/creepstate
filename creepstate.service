[Unit]
Description=Trump-Epstein Timeline Investigation Service
Documentation=https://github.com/user/creepstate-timeline
After=docker.service
Requires=docker.service

[Service]
Type=notify
User=root
Group=root
ExecStart=/opt/creepstate-timeline/update-server.sh monitor
ExecReload=/opt/creepstate-timeline/update-server.sh deploy
ExecStop=/bin/bash -c 'docker stop creepstate-timeline || true'
Restart=on-failure
RestartSec=10
TimeoutStartSec=300
TimeoutStopSec=120

# Security settings
NoNewPrivileges=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/opt/creepstate-timeline /var/log /opt/backups
PrivateDevices=true
ProtectKernelTunables=true
ProtectKernelModules=true
ProtectControlGroups=true

# Environment
Environment=PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
Environment=DOCKER_HOST=unix:///var/run/docker.sock

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=creepstate-timeline

[Install]
WantedBy=multi-user.target